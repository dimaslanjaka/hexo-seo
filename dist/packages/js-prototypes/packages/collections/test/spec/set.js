"use strict";
var Iterator = require("collections/iterator");
module.exports = describeSet;
function describeSet(Set, sorted) {
    it("uniqueness", function () {
        var set = Set.from([1, 2, 3, 1, 2, 3]);
        expect(set.toArray().sort()).toEqual([1, 2, 3]);
    });
    it("the callback should receive value, value, set", function () {
        var set = Set.from([1, 2, 3]);
        var other = Set.from([]);
        var i = 1;
        set.forEach(function (value, key, object) {
            expect(key).toBe(value);
            i++;
            other.add(value);
            expect(object).toBe(set);
        });
        expect(other.length).toBe(3);
        expect(other.union(set).length).toBe(3);
        expect(other.intersection(set).length).toBe(3);
        expect(other.difference(set).length).toBe(0);
    });
    it("should be initially empty", function () {
        expect(new Set().length).toBe(0);
    });
    it("cleared set should be empty", function () {
        var set = Set.from([1, 2]);
        expect(set.length).toBe(2);
        set.delete(1);
        expect(set.length).toBe(1);
        set.clear();
        expect(set.length).toBe(0);
    });
    it("can add and delete an object", function () {
        var set = new Set();
        var object = {};
        set.add(object);
        expect(set.has(object)).toBe(true);
        set.delete(object);
        expect(set.length).toBe(0);
        expect(set.has(object)).toBe(false);
    });
    it("can deleteAll", function () {
        var set = Set.from([0]);
        expect(set.deleteAll(0)).toBe(1);
        expect(set.deleteAll(0)).toBe(0);
    });
    if (!sorted) {
        it("can add and delete objects from the same bucket", function () {
            var a = { id: 0 }, b = { id: 1 };
            var set = new Set();
            set.add(a);
            expect(set.has(a)).toBe(true);
            set.add(b);
            expect(set.has(b)).toBe(true);
            set.delete(b);
            expect(set.has(b)).toBe(false);
            expect(set.has(a)).toBe(true);
            set.delete(a);
            expect(set.has(a)).toBe(false);
        });
    }
    it("can readd a deleted object", function () {
        var set = new Set();
        var object = {};
        set.add(object);
        expect(set.has(object)).toBe(true);
        set.add(object);
        expect(set.length).toBe(1);
        set.delete(object);
        expect(set.length).toBe(0);
        expect(set.has(object)).toBe(false);
        set.add(object);
        expect(set.length).toBe(1);
        expect(set.has(object)).toBe(true);
    });
    it("can be changed to an array", function () {
        var set = Set.from([0]);
        expect(set.toArray()).toEqual([0]);
    });
    it("is a reducible", function () {
        var set = Set.from([1, 1, 1, 2, 2, 2, 1, 2]);
        expect(set.length).toBe(2);
        expect(set.min()).toBe(1);
        expect(set.max()).toBe(2);
        expect(set.sum()).toBe(3);
        expect(set.average()).toBe(1.5);
        expect(set.map(function (n) {
            return n + 1;
        }).indexOf(3)).not.toBe(-1);
    });
    it("is iterable", function () {
        var set = Set.from(['c', 'b', 'a']);
        var valuesArray = set.valuesArray();
        expect(valuesArray.sort()).toEqual(['a', 'b', 'c']);
    });
    it("is concatenatable", function () {
        var array = Set.from([3, 2, 1]).concat([4, 5, 6]).toArray();
        array.sort();
        expect(array).toEqual([1, 2, 3, 4, 5, 6]);
    });
    it("should compute unions", function () {
        expect(Set.from([1, 2, 3]).union([2, 3, 4]).sorted()).toEqual([1, 2, 3, 4]);
        expect(Set.from([1, 2, 3]).union([2, 3, 4]).equals([1, 2, 3, 4])).toBe(true);
    });
    it("should compute intersections", function () {
        expect(Set.from([1, 2, 3]).intersection([2, 3, 4]).sorted()).toEqual([2, 3]);
    });
    it("should compute differences", function () {
        expect(Set.from([1, 2, 3]).difference([2, 3, 4]).sorted()).toEqual([1]);
    });
    it("should compute symmetric differences", function () {
        expect(Set.from([1, 2, 3]).symmetricDifference([2, 3, 4]).sorted()).toEqual([1, 4]);
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0LmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyJwYWNrYWdlcy9qcy1wcm90b3R5cGVzL3BhY2thZ2VzL2NvbGxlY3Rpb25zL3Rlc3Qvc3BlYy9zZXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLElBQUksUUFBUSxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBRS9DLE1BQU0sQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDO0FBQzdCLFNBQVMsV0FBVyxDQUFDLEdBQUcsRUFBRSxNQUFNO0lBRTVCLEVBQUUsQ0FBQyxZQUFZLEVBQUU7UUFDYixJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEQsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsK0NBQStDLEVBQUU7UUFDaEQsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QixJQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNWLEdBQUcsQ0FBQyxPQUFPLENBQUMsVUFBVSxLQUFLLEVBQUUsR0FBRyxFQUFFLE1BQU07WUFDcEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN4QixDQUFDLEVBQUUsQ0FBQztZQUNKLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDakIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM3QixDQUFDLENBQUMsQ0FBQztRQUNILE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdCLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QyxNQUFNLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0MsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDJCQUEyQixFQUFFO1FBQzVCLE1BQU0sQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyQyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyw2QkFBNkIsRUFBRTtRQUM5QixJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0IsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNkLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNCLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNaLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQy9CLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDhCQUE4QixFQUFFO1FBQy9CLElBQUksR0FBRyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7UUFDcEIsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2hCLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDaEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbkMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNuQixNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQixNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN4QyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxlQUFlLEVBQUU7UUFDaEIsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDckMsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsTUFBTSxFQUFFO1FBQ1QsRUFBRSxDQUFDLGlEQUFpRCxFQUFFO1lBQ2xELElBQUksQ0FBQyxHQUFHLEVBQUMsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFLENBQUMsR0FBRyxFQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUMsQ0FBQztZQUM3QixJQUFJLEdBQUcsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO1lBQ3BCLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDWCxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5QixHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ1gsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDOUIsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNkLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzlCLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDZCxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQztLQUNOO0lBRUQsRUFBRSxDQUFDLDRCQUE0QixFQUFFO1FBQzdCLElBQUksR0FBRyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7UUFDcEIsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2hCLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDaEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbkMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNoQixNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQixHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ25CLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNCLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDaEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdkMsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsNEJBQTRCLEVBQUU7UUFDN0IsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdkMsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsZ0JBQWdCLEVBQUU7UUFDakIsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdDLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNCLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxQixNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFCLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDaEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDO1lBQ3RCLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqQixDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEMsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsYUFBYSxFQUFFO1FBQ2QsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwQyxJQUFJLFdBQVcsR0FBRyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDcEMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN4RCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxtQkFBbUIsRUFBRTtRQUNwQixJQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUM1RCxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDYixNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlDLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLHVCQUF1QixFQUFFO1FBQ3hCLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDakYsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsOEJBQThCLEVBQUU7UUFDL0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakYsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsNEJBQTRCLEVBQUU7UUFDN0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1RSxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRTtRQUN2QyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3hGLENBQUMsQ0FBQyxDQUFDO0FBRVAsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIlxudmFyIEl0ZXJhdG9yID0gcmVxdWlyZShcImNvbGxlY3Rpb25zL2l0ZXJhdG9yXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlc2NyaWJlU2V0O1xuZnVuY3Rpb24gZGVzY3JpYmVTZXQoU2V0LCBzb3J0ZWQpIHtcblxuICAgIGl0KFwidW5pcXVlbmVzc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZXQgPSBTZXQuZnJvbShbMSwgMiwgMywgMSwgMiwgM10pO1xuICAgICAgICBleHBlY3Qoc2V0LnRvQXJyYXkoKS5zb3J0KCkpLnRvRXF1YWwoWzEsIDIsIDNdKTtcbiAgICB9KTtcblxuICAgIGl0KFwidGhlIGNhbGxiYWNrIHNob3VsZCByZWNlaXZlIHZhbHVlLCB2YWx1ZSwgc2V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNldCA9IFNldC5mcm9tKFsxLCAyLCAzXSk7XG4gICAgICAgIHZhciBvdGhlciA9IFNldC5mcm9tKFtdKTtcbiAgICAgICAgdmFyIGkgPSAxO1xuICAgICAgICBzZXQuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICAgICAgICBleHBlY3Qoa2V5KS50b0JlKHZhbHVlKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIG90aGVyLmFkZCh2YWx1ZSk7XG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0KS50b0JlKHNldCk7XG4gICAgICAgIH0pO1xuICAgICAgICBleHBlY3Qob3RoZXIubGVuZ3RoKS50b0JlKDMpO1xuICAgICAgICBleHBlY3Qob3RoZXIudW5pb24oc2V0KS5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICAgIGV4cGVjdChvdGhlci5pbnRlcnNlY3Rpb24oc2V0KS5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICAgIGV4cGVjdChvdGhlci5kaWZmZXJlbmNlKHNldCkubGVuZ3RoKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgYmUgaW5pdGlhbGx5IGVtcHR5XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KG5ldyBTZXQoKS5sZW5ndGgpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdChcImNsZWFyZWQgc2V0IHNob3VsZCBiZSBlbXB0eVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZXQgPSBTZXQuZnJvbShbMSwgMl0pO1xuICAgICAgICBleHBlY3Qoc2V0Lmxlbmd0aCkudG9CZSgyKTtcbiAgICAgICAgc2V0LmRlbGV0ZSgxKTtcbiAgICAgICAgZXhwZWN0KHNldC5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICAgIHNldC5jbGVhcigpO1xuICAgICAgICBleHBlY3Qoc2V0Lmxlbmd0aCkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KFwiY2FuIGFkZCBhbmQgZGVsZXRlIGFuIG9iamVjdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgc2V0LmFkZChvYmplY3QpO1xuICAgICAgICBleHBlY3Qoc2V0LmhhcyhvYmplY3QpKS50b0JlKHRydWUpO1xuICAgICAgICBzZXQuZGVsZXRlKG9iamVjdCk7XG4gICAgICAgIGV4cGVjdChzZXQubGVuZ3RoKS50b0JlKDApO1xuICAgICAgICBleHBlY3Qoc2V0LmhhcyhvYmplY3QpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KFwiY2FuIGRlbGV0ZUFsbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZXQgPSBTZXQuZnJvbShbMF0pO1xuICAgICAgICBleHBlY3Qoc2V0LmRlbGV0ZUFsbCgwKSkudG9CZSgxKTtcbiAgICAgICAgZXhwZWN0KHNldC5kZWxldGVBbGwoMCkpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpZiAoIXNvcnRlZCkge1xuICAgICAgICBpdChcImNhbiBhZGQgYW5kIGRlbGV0ZSBvYmplY3RzIGZyb20gdGhlIHNhbWUgYnVja2V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhID0ge2lkOiAwfSwgYiA9IHtpZDogMX07XG4gICAgICAgICAgICB2YXIgc2V0ID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgc2V0LmFkZChhKTtcbiAgICAgICAgICAgIGV4cGVjdChzZXQuaGFzKGEpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgc2V0LmFkZChiKTtcbiAgICAgICAgICAgIGV4cGVjdChzZXQuaGFzKGIpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgc2V0LmRlbGV0ZShiKTtcbiAgICAgICAgICAgIGV4cGVjdChzZXQuaGFzKGIpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChzZXQuaGFzKGEpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgc2V0LmRlbGV0ZShhKTtcbiAgICAgICAgICAgIGV4cGVjdChzZXQuaGFzKGEpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaXQoXCJjYW4gcmVhZGQgYSBkZWxldGVkIG9iamVjdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgc2V0LmFkZChvYmplY3QpO1xuICAgICAgICBleHBlY3Qoc2V0LmhhcyhvYmplY3QpKS50b0JlKHRydWUpO1xuICAgICAgICBzZXQuYWRkKG9iamVjdCk7XG4gICAgICAgIGV4cGVjdChzZXQubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgICBzZXQuZGVsZXRlKG9iamVjdCk7XG4gICAgICAgIGV4cGVjdChzZXQubGVuZ3RoKS50b0JlKDApO1xuICAgICAgICBleHBlY3Qoc2V0LmhhcyhvYmplY3QpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgc2V0LmFkZChvYmplY3QpO1xuICAgICAgICBleHBlY3Qoc2V0Lmxlbmd0aCkudG9CZSgxKTtcbiAgICAgICAgZXhwZWN0KHNldC5oYXMob2JqZWN0KSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KFwiY2FuIGJlIGNoYW5nZWQgdG8gYW4gYXJyYXlcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2V0ID0gU2V0LmZyb20oWzBdKTtcbiAgICAgICAgZXhwZWN0KHNldC50b0FycmF5KCkpLnRvRXF1YWwoWzBdKTtcbiAgICB9KTtcblxuICAgIGl0KFwiaXMgYSByZWR1Y2libGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2V0ID0gU2V0LmZyb20oWzEsIDEsIDEsIDIsIDIsIDIsIDEsIDJdKTtcbiAgICAgICAgZXhwZWN0KHNldC5sZW5ndGgpLnRvQmUoMik7XG4gICAgICAgIGV4cGVjdChzZXQubWluKCkpLnRvQmUoMSk7XG4gICAgICAgIGV4cGVjdChzZXQubWF4KCkpLnRvQmUoMik7XG4gICAgICAgIGV4cGVjdChzZXQuc3VtKCkpLnRvQmUoMyk7XG4gICAgICAgIGV4cGVjdChzZXQuYXZlcmFnZSgpKS50b0JlKDEuNSk7XG4gICAgICAgIGV4cGVjdChzZXQubWFwKGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICByZXR1cm4gbiArIDE7XG4gICAgICAgIH0pLmluZGV4T2YoMykpLm5vdC50b0JlKC0xKTtcbiAgICB9KTtcblxuICAgIGl0KFwiaXMgaXRlcmFibGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2V0ID0gU2V0LmZyb20oWydjJywgJ2InLCAnYSddKTtcbiAgICAgICAgdmFyIHZhbHVlc0FycmF5ID0gc2V0LnZhbHVlc0FycmF5KCk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZXNBcnJheS5zb3J0KCkpLnRvRXF1YWwoWydhJywgJ2InLCAnYyddKTtcbiAgICB9KTtcblxuICAgIGl0KFwiaXMgY29uY2F0ZW5hdGFibGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJyYXkgPSBTZXQuZnJvbShbMywgMiwgMV0pLmNvbmNhdChbNCwgNSwgNl0pLnRvQXJyYXkoKTtcbiAgICAgICAgYXJyYXkuc29ydCgpO1xuICAgICAgICBleHBlY3QoYXJyYXkpLnRvRXF1YWwoWzEsIDIsIDMsIDQsIDUsIDZdKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGNvbXB1dGUgdW5pb25zXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KFNldC5mcm9tKFsxLCAyLCAzXSkudW5pb24oWzIsIDMsIDRdKS5zb3J0ZWQoKSkudG9FcXVhbChbMSwgMiwgMywgNF0pO1xuICAgICAgICBleHBlY3QoU2V0LmZyb20oWzEsIDIsIDNdKS51bmlvbihbMiwgMywgNF0pLmVxdWFscyhbMSwgMiwgMywgNF0pKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgY29tcHV0ZSBpbnRlcnNlY3Rpb25zXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KFNldC5mcm9tKFsxLCAyLCAzXSkuaW50ZXJzZWN0aW9uKFsyLCAzLCA0XSkuc29ydGVkKCkpLnRvRXF1YWwoWzIsIDNdKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGNvbXB1dGUgZGlmZmVyZW5jZXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QoU2V0LmZyb20oWzEsIDIsIDNdKS5kaWZmZXJlbmNlKFsyLCAzLCA0XSkuc29ydGVkKCkpLnRvRXF1YWwoWzFdKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGNvbXB1dGUgc3ltbWV0cmljIGRpZmZlcmVuY2VzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KFNldC5mcm9tKFsxLCAyLCAzXSkuc3ltbWV0cmljRGlmZmVyZW5jZShbMiwgMywgNF0pLnNvcnRlZCgpKS50b0VxdWFsKFsxLCA0XSk7XG4gICAgfSk7XG5cbn1cbiJdfQ==