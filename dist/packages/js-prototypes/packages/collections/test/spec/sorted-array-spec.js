"use strict";
var SortedArray = require("collections/sorted-array");
var describeCollection = require("./collection");
var describeDeque = require("./deque");
var describeOrder = require("./order");
var describeToJson = require("./to-json");
describe("SortedArray-spec", function () {
    describeDeque(SortedArray);
    describeCollection(SortedArray, [1, 2, 3, 4]);
    describeOrder(SortedArray);
    describeToJson(SortedArray, [1, 2, 3, 4]);
    describe("non-uniqueness", function () {
        it("should retain non-unique values", function () {
            var array = SortedArray([1, 2, 3, 1, 2, 3]);
            expect(array.slice()).toEqual([1, 1, 2, 2, 3, 3]);
        });
    });
    describe("deleteAll", function () {
        it("should delete a range of equivalent values", function () {
            var array = SortedArray([1, 1, 1, 2, 2, 2, 3, 3, 3]);
            expect(array.deleteAll(2)).toBe(3);
            expect(array.toArray()).toEqual([1, 1, 1, 3, 3, 3]);
        });
        it("deletes all equivalent values for an alternate relation", function () {
            var equivalent = function (a, b) {
                return a % 2 === b % 2;
            };
            var collection = SortedArray([1, 2, 3, 4, 5]);
            expect(collection.deleteAll(2, equivalent)).toBe(2);
            expect(collection.toArray()).toEqual([1, 3, 5]);
            expect(collection.length).toBe(3);
        });
    });
    describe("incomparable values", function () {
        function customEquals(one, two) {
            return one.id === two.id;
        }
        function customCompare(left, right) {
            if (left.position < right.position) {
                return -1;
            }
            if (left.position > right.position) {
                return 1;
            }
            return 0;
        }
        var a1 = { id: 'A', position: 1 };
        var b1 = { id: 'B', position: 1 };
        var c1 = { id: 'C', position: 1 };
        function createCustomArray(backingArray) {
            // The ordering of incomparable elements is undefined.
            // To control the underlying array it's set directly here.
            var array = new SortedArray([], customEquals, customCompare);
            array.array = backingArray;
            return array;
        }
        it("should find the correct incomparable value in a streak", function () {
            var array = createCustomArray([a1, b1, c1]);
            expect(array.indexOf(a1)).toEqual(0);
            expect(array.indexOf(b1)).toEqual(1);
            expect(array.indexOf(c1)).toEqual(2);
        });
        it("should respect search direction", function () {
            var array = createCustomArray([a1, a1, a1]);
            expect(array.indexOf(a1)).toEqual(0);
            expect(array.lastIndexOf(a1)).toEqual(2);
        });
        it("should work regardless of array size", function () {
            var array = createCustomArray([]);
            expect(array.indexOf(a1)).toEqual(-1);
            array = createCustomArray([a1]);
            expect(array.indexOf(a1)).toEqual(0);
            array = createCustomArray([a1, b1]);
            expect(array.indexOf(a1)).toEqual(0);
            expect(array.indexOf(b1)).toEqual(1);
        });
    });
    // TODO test stability
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ydGVkLWFycmF5LXNwZWMuanMiLCJzb3VyY2VSb290IjoiLi8iLCJzb3VyY2VzIjpbInBhY2thZ2VzL2pzLXByb3RvdHlwZXMvcGFja2FnZXMvY29sbGVjdGlvbnMvdGVzdC9zcGVjL3NvcnRlZC1hcnJheS1zcGVjLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxJQUFJLFdBQVcsR0FBRyxPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUN0RCxJQUFJLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUNqRCxJQUFJLGFBQWEsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDdkMsSUFBSSxhQUFhLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksY0FBYyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUUxQyxRQUFRLENBQUMsa0JBQWtCLEVBQUU7SUFHekIsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQzNCLGtCQUFrQixDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDOUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQzNCLGNBQWMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTFDLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRTtRQUN2QixFQUFFLENBQUMsaUNBQWlDLEVBQUU7WUFDbEMsSUFBSSxLQUFLLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxF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QUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFckMsS0FBSyxHQUFHLGlCQUFpQixDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDcEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILHNCQUFzQjtBQUUxQixDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIlxudmFyIFNvcnRlZEFycmF5ID0gcmVxdWlyZShcImNvbGxlY3Rpb25zL3NvcnRlZC1hcnJheVwiKTtcbnZhciBkZXNjcmliZUNvbGxlY3Rpb24gPSByZXF1aXJlKFwiLi9jb2xsZWN0aW9uXCIpO1xudmFyIGRlc2NyaWJlRGVxdWUgPSByZXF1aXJlKFwiLi9kZXF1ZVwiKTtcbnZhciBkZXNjcmliZU9yZGVyID0gcmVxdWlyZShcIi4vb3JkZXJcIik7XG52YXIgZGVzY3JpYmVUb0pzb24gPSByZXF1aXJlKFwiLi90by1qc29uXCIpO1xuXG5kZXNjcmliZShcIlNvcnRlZEFycmF5LXNwZWNcIiwgZnVuY3Rpb24gKCkge1xuXG5cbiAgICBkZXNjcmliZURlcXVlKFNvcnRlZEFycmF5KTtcbiAgICBkZXNjcmliZUNvbGxlY3Rpb24oU29ydGVkQXJyYXksIFsxLCAyLCAzLCA0XSk7XG4gICAgZGVzY3JpYmVPcmRlcihTb3J0ZWRBcnJheSk7XG4gICAgZGVzY3JpYmVUb0pzb24oU29ydGVkQXJyYXksIFsxLCAyLCAzLCA0XSk7XG5cbiAgICBkZXNjcmliZShcIm5vbi11bmlxdWVuZXNzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaXQoXCJzaG91bGQgcmV0YWluIG5vbi11bmlxdWUgdmFsdWVzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcnJheSA9IFNvcnRlZEFycmF5KFsxLCAyLCAzLCAxLCAyLCAzXSk7XG4gICAgICAgICAgICBleHBlY3QoYXJyYXkuc2xpY2UoKSkudG9FcXVhbChbMSwgMSwgMiwgMiwgMywgM10pO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiZGVsZXRlQWxsXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaXQoXCJzaG91bGQgZGVsZXRlIGEgcmFuZ2Ugb2YgZXF1aXZhbGVudCB2YWx1ZXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFycmF5ID0gU29ydGVkQXJyYXkoWzEsIDEsIDEsIDIsIDIsIDIsIDMsIDMsIDNdKTtcbiAgICAgICAgICAgIGV4cGVjdChhcnJheS5kZWxldGVBbGwoMikpLnRvQmUoMyk7XG4gICAgICAgICAgICBleHBlY3QoYXJyYXkudG9BcnJheSgpKS50b0VxdWFsKFsxLCAxLCAxLCAzLCAzLCAzXSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdChcImRlbGV0ZXMgYWxsIGVxdWl2YWxlbnQgdmFsdWVzIGZvciBhbiBhbHRlcm5hdGUgcmVsYXRpb25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVxdWl2YWxlbnQgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBhICUgMiA9PT0gYiAlIDI7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBTb3J0ZWRBcnJheShbMSwgMiwgMywgNCwgNV0pO1xuICAgICAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24uZGVsZXRlQWxsKDIsIGVxdWl2YWxlbnQpKS50b0JlKDIpO1xuICAgICAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24udG9BcnJheSgpKS50b0VxdWFsKFsxLCAzLCA1XSk7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJpbmNvbXBhcmFibGUgdmFsdWVzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gY3VzdG9tRXF1YWxzKG9uZSwgdHdvKSB7XG4gICAgICAgICAgICByZXR1cm4gb25lLmlkID09PSB0d28uaWQ7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjdXN0b21Db21wYXJlKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgICAgICBpZiAobGVmdC5wb3NpdGlvbiA8IHJpZ2h0LnBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxlZnQucG9zaXRpb24gPiByaWdodC5wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYTEgPSB7aWQ6ICdBJywgcG9zaXRpb246IDF9O1xuICAgICAgICB2YXIgYjEgPSB7aWQ6ICdCJywgcG9zaXRpb246IDF9O1xuICAgICAgICB2YXIgYzEgPSB7aWQ6ICdDJywgcG9zaXRpb246IDF9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbUFycmF5KGJhY2tpbmdBcnJheSkge1xuICAgICAgICAgICAgLy8gVGhlIG9yZGVyaW5nIG9mIGluY29tcGFyYWJsZSBlbGVtZW50cyBpcyB1bmRlZmluZWQuXG4gICAgICAgICAgICAvLyBUbyBjb250cm9sIHRoZSB1bmRlcmx5aW5nIGFycmF5IGl0J3Mgc2V0IGRpcmVjdGx5IGhlcmUuXG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBuZXcgU29ydGVkQXJyYXkoW10sIGN1c3RvbUVxdWFscywgY3VzdG9tQ29tcGFyZSk7XG4gICAgICAgICAgICBhcnJheS5hcnJheSA9IGJhY2tpbmdBcnJheTtcbiAgICAgICAgICAgIHJldHVybiBhcnJheTtcbiAgICAgICAgfVxuXG4gICAgICAgIGl0KFwic2hvdWxkIGZpbmQgdGhlIGNvcnJlY3QgaW5jb21wYXJhYmxlIHZhbHVlIGluIGEgc3RyZWFrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcnJheSA9IGNyZWF0ZUN1c3RvbUFycmF5KFthMSwgYjEsIGMxXSk7XG4gICAgICAgICAgICBleHBlY3QoYXJyYXkuaW5kZXhPZihhMSkpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgICBleHBlY3QoYXJyYXkuaW5kZXhPZihiMSkpLnRvRXF1YWwoMSk7XG4gICAgICAgICAgICBleHBlY3QoYXJyYXkuaW5kZXhPZihjMSkpLnRvRXF1YWwoMik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIHJlc3BlY3Qgc2VhcmNoIGRpcmVjdGlvblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBjcmVhdGVDdXN0b21BcnJheShbYTEsIGExLCBhMV0pO1xuICAgICAgICAgICAgZXhwZWN0KGFycmF5LmluZGV4T2YoYTEpKS50b0VxdWFsKDApO1xuICAgICAgICAgICAgZXhwZWN0KGFycmF5Lmxhc3RJbmRleE9mKGExKSkudG9FcXVhbCgyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgd29yayByZWdhcmRsZXNzIG9mIGFycmF5IHNpemVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFycmF5ID0gY3JlYXRlQ3VzdG9tQXJyYXkoW10pO1xuICAgICAgICAgICAgZXhwZWN0KGFycmF5LmluZGV4T2YoYTEpKS50b0VxdWFsKC0xKTtcblxuICAgICAgICAgICAgYXJyYXkgPSBjcmVhdGVDdXN0b21BcnJheShbYTFdKTtcbiAgICAgICAgICAgIGV4cGVjdChhcnJheS5pbmRleE9mKGExKSkudG9FcXVhbCgwKTtcblxuICAgICAgICAgICAgYXJyYXkgPSBjcmVhdGVDdXN0b21BcnJheShbYTEsIGIxXSk7XG4gICAgICAgICAgICBleHBlY3QoYXJyYXkuaW5kZXhPZihhMSkpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgICBleHBlY3QoYXJyYXkuaW5kZXhPZihiMSkpLnRvRXF1YWwoMSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gVE9ETyB0ZXN0IHN0YWJpbGl0eVxuXG59KTtcbiJdfQ==