"use strict";
require("collections/shim-array");
var SortedSet = require("collections/sorted-set");
var TreeLog = require("collections/tree-log");
var describeDeque = require("./deque");
var describeCollection = require("./collection");
var describeSet = require("./set");
var describeToJson = require("./to-json");
var Fuzz = require("./fuzz");
describe("SortedSet-spec", function () {
    // TODO SortedSet compare and equals argument overrides
    // construction, has, add, get, delete
    describeCollection(SortedSet, [1, 2, 3, 4], true);
    // comparable objects
    function Value(value) {
        this.value = value;
    }
    Value.prototype.compare = function (that) {
        return Object.compare(this.value, that.value);
    };
    var a = new Value(1);
    var b = new Value(2);
    var c = new Value(3);
    var d = new Value(4);
    var values = [a, b, c, d];
    describeCollection(SortedSet, values, true);
    // Happens to qualify as a deque, since the tests keep the content in
    // sorted order.  SortedSet has meaningful pop and shift operations, but
    // push and unshift just add the arguments into their proper sorted
    // positions rather than the ends.
    describeDeque(SortedSet);
    describeSet(SortedSet, "sorted");
    describeToJson(SortedSet, [1, 2, 3, 4]);
    describe("splay", function () {
        function draw(set) {
            var lines = [];
            set.log(TreeLog.ascii, null, lines.push, lines);
            return lines;
        }
        it("should degenerate for sorted values", function () {
            var set = SortedSet([1, 2, 3]);
            expect(draw(set)).toEqual([
                "  .-- 1",
                ".-+ 2",
                "+ 3"
            ]);
        });
        it("should splay middle value", function () {
            var set = SortedSet([1, 2, 3]);
            set.get(2);
            expect(draw(set)).toEqual([
                ".-- 1",
                "+ 2",
                "'-- 3"
            ]);
        });
        it("should splay middle value", function () {
            var set = SortedSet([1, 2, 3]);
            set.get(2);
            set.delete(1);
            expect(draw(set)).toEqual([
                "+ 2",
                "'-- 3"
            ]);
        });
    });
    describe("subtree lengths", function () {
        function draw(set) {
            var lines = [];
            set.log(TreeLog.ascii, function (node, write, writeAbove) {
                write(" " + node.value + " length=" + node.length);
            }, lines.push, lines);
            return lines;
        }
        function expectNodeToHaveCorrectSubtreeLengths(node) {
            if (!node)
                return 0;
            var length = 1;
            length += expectNodeToHaveCorrectSubtreeLengths(node.left);
            length += expectNodeToHaveCorrectSubtreeLengths(node.right);
            expect(node.length).toBe(length);
            return length;
        }
        it("+1", function () {
            var set = SortedSet([1]);
            expect(draw(set)).toEqual([
                "- 1 length=1"
            ]);
            expectNodeToHaveCorrectSubtreeLengths(set.root);
        });
        it("+1, +2", function () {
            var set = SortedSet([1, 2]);
            expect(draw(set)).toEqual([
                ".-- 1 length=1",
                "+ 2 length=2"
            ]);
            expectNodeToHaveCorrectSubtreeLengths(set.root);
        });
        it("+1, +2, 1", function () {
            var set = SortedSet([1, 2]);
            set.get(1);
            expect(draw(set)).toEqual([
                "+ 1 length=2",
                "'-- 2 length=1"
            ]);
            expectNodeToHaveCorrectSubtreeLengths(set.root);
        });
        it("+1, +3, +2", function () {
            var set = SortedSet([1, 3, 2]);
            expect(draw(set)).toEqual([
                ".-- 1 length=1",
                "+ 2 length=3",
                "'-- 3 length=1"
            ]);
            expectNodeToHaveCorrectSubtreeLengths(set.root);
        });
        function makeCase(description, operations, log) {
            it(description + " " + operations, function () {
                var set = SortedSet();
                Fuzz.execute(set, Fuzz.parse(operations), log);
                expectNodeToHaveCorrectSubtreeLengths(set.root);
            });
        }
        makeCase("reduction of case with propagation issue", "+2, +4, +3, +1, 4");
        // 50 fuzz cases
        for (var i = 0; i < 50; i++) {
            (function () {
                var fuzz = Fuzz.make(i * 5, i, Math.max(10, i * 5));
                makeCase("fuzz", Fuzz.stringify(fuzz));
            })();
        }
    });
    describe("splayIndex", function () {
        it("should find the index of every element", function () {
            var numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15];
            var rand = Fuzz.makeRandom(0);
            numbers.sort(function () {
                return rand() - .5;
            });
            var set = SortedSet(numbers);
            numbers.forEach(function (index) {
                set.splayIndex(index);
                expect(set.root.index).toBe(index);
                expect(set.root.value).toBe(index);
            });
        });
    });
    describe("indexOf", function () {
        // fuzz cases
        for (var seed = 0; seed < 20; seed++) {
            (function (seed) {
                var numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15];
                var rand = Fuzz.makeRandom(seed);
                numbers.sort(function () {
                    return rand() - .5;
                });
                it("should discern the position of every value in " + numbers.join(", "), function () {
                    var set = SortedSet(numbers);
                    numbers.forEach(function (n, i) {
                        expect(set.indexOf(n)).toBe(n);
                    });
                });
            })(seed);
        }
    });
    describe("find methods", function () {
        var set = new SortedSet([22, 23, 1, 34, 19, 5, 26, 12, 27, 30, 21,
            20, 6, 7, 2, 32, 10, 9, 33, 3, 11, 17, 28, 15]);
        describe("find", function () {
            it("should find the node for existing values", function () {
                expect(set.find(1).value).toBe(1);
                expect(set.find(5).value).toBe(5);
                expect(set.find(9).value).toBe(9);
                expect(set.find(30).value).toBe(30);
                expect(set.find(34).value).toBe(34);
            });
            it("should return undefined for non-existent values", function () {
                expect(set.find(4)).toBe(undefined);
                expect(set.find(13)).toBe(undefined);
                expect(set.find(31)).toBe(undefined);
            });
        });
        describe("findGreatest", function () {
            it("should return the highest value in the set", function () {
                expect(set.findGreatest().value).toBe(34);
            });
        });
        describe("findLeast", function () {
            it("should return the lowest value in the set", function () {
                expect(set.findLeast().value).toBe(1);
            });
        });
        describe("findGreatestLessThanOrEqual", function () {
            it("should return values that exist in the set", function () {
                expect(set.findGreatestLessThanOrEqual(5).value).toBe(5);
                expect(set.findGreatestLessThanOrEqual(7).value).toBe(7);
                expect(set.findGreatestLessThanOrEqual(9).value).toBe(9);
            });
            it("should return the next highest value", function () {
                expect(set.findGreatestLessThanOrEqual(14).value).toBe(12);
                expect(set.findGreatestLessThanOrEqual(24).value).toBe(23);
                expect(set.findGreatestLessThanOrEqual(31).value).toBe(30);
                expect(set.findGreatestLessThanOrEqual(4).value).toBe(3);
                expect(set.findGreatestLessThanOrEqual(29).value).toBe(28);
                expect(set.findGreatestLessThanOrEqual(25).value).toBe(23);
            });
            it("should return undefined for values out of range", function () {
                expect(set.findGreatestLessThanOrEqual(0)).toBe(undefined);
            });
        });
        describe("findGreatestLessThan", function () {
            it("should return next highest for values that exist in the set", function () {
                expect(set.findGreatestLessThan(5).value).toBe(3);
                expect(set.findGreatestLessThan(7).value).toBe(6);
                expect(set.findGreatestLessThan(9).value).toBe(7);
                expect(set.findGreatestLessThan(26).value).toBe(23);
            });
            it("should return the next highest value", function () {
                expect(set.findGreatestLessThan(14).value).toBe(12);
                expect(set.findGreatestLessThan(24).value).toBe(23);
                expect(set.findGreatestLessThan(31).value).toBe(30);
                expect(set.findGreatestLessThan(4).value).toBe(3);
                expect(set.findGreatestLessThan(29).value).toBe(28);
                expect(set.findGreatestLessThan(25).value).toBe(23);
            });
            it("should return undefined for value at bottom of range", function () {
                expect(set.findGreatestLessThan(1)).toBe(undefined);
            });
        });
        describe("findLeastGreaterThanOrEqual", function () {
            it("should return values that exist in the set", function () {
                expect(set.findLeastGreaterThanOrEqual(5).value).toBe(5);
                expect(set.findLeastGreaterThanOrEqual(7).value).toBe(7);
                expect(set.findLeastGreaterThanOrEqual(9).value).toBe(9);
            });
            it("should return the next value", function () {
                expect(set.findLeastGreaterThanOrEqual(13).value).toBe(15);
                expect(set.findLeastGreaterThanOrEqual(24).value).toBe(26);
                expect(set.findLeastGreaterThanOrEqual(31).value).toBe(32);
                expect(set.findLeastGreaterThanOrEqual(4).value).toBe(5);
                expect(set.findLeastGreaterThanOrEqual(29).value).toBe(30);
                expect(set.findLeastGreaterThanOrEqual(25).value).toBe(26);
            });
            it("should return undefined for values out of range", function () {
                expect(set.findLeastGreaterThanOrEqual(36)).toBe(undefined);
            });
        });
        describe("findLeastGreaterThan", function () {
            it("should return next value for values that exist in the set", function () {
                expect(set.findLeastGreaterThan(5).value).toBe(6);
                expect(set.findLeastGreaterThan(7).value).toBe(9);
                expect(set.findLeastGreaterThan(9).value).toBe(10);
                expect(set.findLeastGreaterThan(26).value).toBe(27);
            });
            it("should return the next value", function () {
                expect(set.findLeastGreaterThan(14).value).toBe(15);
                expect(set.findLeastGreaterThan(24).value).toBe(26);
                expect(set.findLeastGreaterThan(31).value).toBe(32);
                expect(set.findLeastGreaterThan(4).value).toBe(5);
                expect(set.findLeastGreaterThan(29).value).toBe(30);
                expect(set.findLeastGreaterThan(25).value).toBe(26);
            });
            it("should return undefined for value at top of range", function () {
                expect(set.findLeastGreaterThan(34)).toBe(undefined);
            });
        });
    });
    describe("addRangeChangeListener", function () {
        // fuzz cases
        for (var seed = 0; seed < 20; seed++) {
            (function (seed) {
                var numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15];
                var rand = Fuzz.makeRandom(seed);
                numbers.sort(function () {
                    return rand() - .5;
                });
                it("should bind content changes to an array for " + numbers.join(", "), function () {
                    var mirror = [];
                    var set = SortedSet();
                    set.addRangeChangeListener(function (plus, minus, index) {
                        mirror.swap(index, minus.length, plus);
                    });
                    set.addEach(numbers);
                    expect(mirror.length).toBe(set.length);
                    mirror.forEach(function (n, i) {
                        expect(n).toBe(i);
                    });
                });
            })(seed);
        }
    });
    describe("log drawings", function () {
        function draw(set) {
            var lines = [];
            set.log({
                intersection: "+",
                through: "-",
                branchUp: "^",
                branchDown: "v",
                fromBelow: ".",
                fromAbove: "'",
                fromBoth: "x",
                strafe: "|"
            }, function (node, write, writeAbove) {
                var line = "" + node.value;
                var length = line.length;
                var rule = Array(length + 1).join("-");
                writeAbove(" +-" + rule + "-+");
                write("-| " + line + " |");
                write(" +-" + rule + "-+");
            }, lines.push, lines);
            return lines;
        }
        it("should draw a simple box", function () {
            var set = SortedSet([1]);
            expect(draw(set)).toEqual([
                "  +---+",
                "--| 1 |",
                "  +---+"
            ]);
        });
        it("should draw a graph of two ascending", function () {
            var set = SortedSet([1, 2]);
            expect(draw(set)).toEqual([
                "    +---+",
                ".---| 1 |",
                "|   +---+",
                "| +---+",
                "^-| 2 |",
                "  +---+"
            ]);
        });
        it("should draw a graph of two descending", function () {
            var set = SortedSet([2, 1]);
            expect(draw(set)).toEqual([
                "  +---+",
                "v-| 1 |",
                "| +---+",
                "|   +---+",
                "'---| 2 |",
                "    +---+"
            ]);
        });
        it("should draw a graph of three", function () {
            var set = SortedSet([3, 1, 2]);
            expect(draw(set)).toEqual([
                "    +---+",
                ".---| 1 |",
                "|   +---+",
                "| +---+",
                "+-| 2 |",
                "| +---+",
                "|   +---+",
                "'---| 3 |",
                "    +---+"
            ]);
        });
        it("should draw a complex graph", function () {
            var set = SortedSet([8, 6, 5, 3, 7, 2, 1, 4]);
            expect(draw(set)).toEqual([
                "      +---+",
                "  .---| 1 |",
                "  |   +---+",
                "  | +---+",
                ".-+-| 2 |",
                "| | +---+",
                "| |   +---+",
                "| '---| 3 |",
                "|     +---+",
                "| +---+",
                "+-| 4 |",
                "| +---+",
                "|   +---+",
                "'-v-| 5 |",
                "  | +---+",
                "  |     +---+",
                "  | .---| 6 |",
                "  | |   +---+",
                "  | | +---+",
                "  '-+-| 7 |",
                "    | +---+",
                "    |   +---+",
                "    '---| 8 |",
                "        +---+"
            ]);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ydGVkLXNldC1zcGVjLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyJwYWNrYWdlcy9qcy1wcm90b3R5cGVzL3BhY2thZ2VzL2NvbGxlY3Rpb25zL3Rlc3Qvc3BlYy9zb3J0ZWQtc2V0LXNwZWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0FBQ2xDLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0FBQ2xELElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBQzlDLElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUN2QyxJQUFJLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUNqRCxJQUFJLFdBQVcsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDbkMsSUFBSSxjQUFjLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzFDLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUU3QixRQUFRLENBQUMsZ0JBQWdCLEVBQUU7SUFHdkIsdURBQXVEO0lBRXZELHNDQUFzQztJQUN0QyxrQkFBa0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUVsRCxxQkFBcUI7SUFDckIsU0FBUyxLQUFLLENBQUMsS0FBSztRQUNoQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUN2QixDQUFDO0lBQ0QsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEdBQUcsVUFBVSxJQUFJO1FBQ3BDLE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsRCxDQUFDLENBQUE7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YUFDZCxDQUFDLENBQUM7UUFDUCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw2QkFBNkIsRUFBRTtZQUM5QixJQUFJLEdBQUcsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO2dCQUN0QixhQUFhO2dCQUNiLGFBQWE7Z0JBQ2IsYUFBYTtnQkFDYixXQUFXO2dCQUNYLFdBQVc7Z0JBQ1gsV0FBVztnQkFDWCxhQUFhO2dCQUNiLGFBQWE7Z0JBQ2IsYUFBYTtnQkFDYixTQUFTO2dCQUNULFNBQVM7Z0JBQ1QsU0FBUztnQkFDVCxXQUFXO2dCQUNYLFdBQVc7Z0JBQ1gsV0FBVztnQkFDWCxlQUFlO2dCQUNmLGVBQWU7Z0JBQ2YsZUFBZTtnQkFDZixhQUFhO2dCQUNiLGFBQWE7Z0JBQ2IsYUFBYTtnQkFDYixlQUFlO2dCQUNmLGVBQWU7Z0JBQ2YsZUFBZTthQUNsQixDQUFDLENBQUM7UUFDUCxDQUFDLENBQUMsQ0FBQztJQUVQLENBQUMsQ0FBQyxDQUFDO0FBRVAsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbnJlcXVpcmUoXCJjb2xsZWN0aW9ucy9zaGltLWFycmF5XCIpO1xudmFyIFNvcnRlZFNldCA9IHJlcXVpcmUoXCJjb2xsZWN0aW9ucy9zb3J0ZWQtc2V0XCIpO1xudmFyIFRyZWVMb2cgPSByZXF1aXJlKFwiY29sbGVjdGlvbnMvdHJlZS1sb2dcIik7XG52YXIgZGVzY3JpYmVEZXF1ZSA9IHJlcXVpcmUoXCIuL2RlcXVlXCIpO1xudmFyIGRlc2NyaWJlQ29sbGVjdGlvbiA9IHJlcXVpcmUoXCIuL2NvbGxlY3Rpb25cIik7XG52YXIgZGVzY3JpYmVTZXQgPSByZXF1aXJlKFwiLi9zZXRcIik7XG52YXIgZGVzY3JpYmVUb0pzb24gPSByZXF1aXJlKFwiLi90by1qc29uXCIpO1xudmFyIEZ1enogPSByZXF1aXJlKFwiLi9mdXp6XCIpO1xuXG5kZXNjcmliZShcIlNvcnRlZFNldC1zcGVjXCIsIGZ1bmN0aW9uICgpIHtcblxuXG4gICAgLy8gVE9ETyBTb3J0ZWRTZXQgY29tcGFyZSBhbmQgZXF1YWxzIGFyZ3VtZW50IG92ZXJyaWRlc1xuXG4gICAgLy8gY29uc3RydWN0aW9uLCBoYXMsIGFkZCwgZ2V0LCBkZWxldGVcbiAgICBkZXNjcmliZUNvbGxlY3Rpb24oU29ydGVkU2V0LCBbMSwgMiwgMywgNF0sIHRydWUpO1xuXG4gICAgLy8gY29tcGFyYWJsZSBvYmplY3RzXG4gICAgZnVuY3Rpb24gVmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBWYWx1ZS5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uICh0aGF0KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuY29tcGFyZSh0aGlzLnZhbHVlLCB0aGF0LnZhbHVlKTtcbiAgICB9XG4gICAgdmFyIGEgPSBuZXcgVmFsdWUoMSk7XG4gICAgdmFyIGIgPSBuZXcgVmFsdWUoMik7XG4gICAgdmFyIGMgPSBuZXcgVmFsdWUoMyk7XG4gICAgdmFyIGQgPSBuZXcgVmFsdWUoNCk7XG4gICAgdmFyIHZhbHVlcyA9IFthLCBiLCBjLCBkXTtcbiAgICBkZXNjcmliZUNvbGxlY3Rpb24oU29ydGVkU2V0LCB2YWx1ZXMsIHRydWUpO1xuXG4gICAgLy8gSGFwcGVucyB0byBxdWFsaWZ5IGFzIGEgZGVxdWUsIHNpbmNlIHRoZSB0ZXN0cyBrZWVwIHRoZSBjb250ZW50IGluXG4gICAgLy8gc29ydGVkIG9yZGVyLiAgU29ydGVkU2V0IGhhcyBtZWFuaW5nZnVsIHBvcCBhbmQgc2hpZnQgb3BlcmF0aW9ucywgYnV0XG4gICAgLy8gcHVzaCBhbmQgdW5zaGlmdCBqdXN0IGFkZCB0aGUgYXJndW1lbnRzIGludG8gdGhlaXIgcHJvcGVyIHNvcnRlZFxuICAgIC8vIHBvc2l0aW9ucyByYXRoZXIgdGhhbiB0aGUgZW5kcy5cbiAgICBkZXNjcmliZURlcXVlKFNvcnRlZFNldCk7XG5cbiAgICBkZXNjcmliZVNldChTb3J0ZWRTZXQsIFwic29ydGVkXCIpO1xuICAgIGRlc2NyaWJlVG9Kc29uKFNvcnRlZFNldCwgWzEsIDIsIDMsIDRdKTtcblxuICAgIGRlc2NyaWJlKFwic3BsYXlcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXcoc2V0KSB7XG4gICAgICAgICAgICB2YXIgbGluZXMgPSBbXTtcbiAgICAgICAgICAgIHNldC5sb2coVHJlZUxvZy5hc2NpaSwgbnVsbCwgbGluZXMucHVzaCwgbGluZXMpO1xuICAgICAgICAgICAgcmV0dXJuIGxpbmVzO1xuICAgICAgICB9XG5cbiAgICAgICAgaXQoXCJzaG91bGQgZGVnZW5lcmF0ZSBmb3Igc29ydGVkIHZhbHVlc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2V0ID0gU29ydGVkU2V0KFsxLCAyLCAzXSk7XG4gICAgICAgICAgICBleHBlY3QoZHJhdyhzZXQpKS50b0VxdWFsKFtcbiAgICAgICAgICAgICAgICBcIiAgLi0tIDFcIixcbiAgICAgICAgICAgICAgICBcIi4tKyAyXCIsXG4gICAgICAgICAgICAgICAgXCIrIDNcIlxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIHNwbGF5IG1pZGRsZSB2YWx1ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2V0ID0gU29ydGVkU2V0KFsxLCAyLCAzXSk7XG4gICAgICAgICAgICBzZXQuZ2V0KDIpO1xuICAgICAgICAgICAgZXhwZWN0KGRyYXcoc2V0KSkudG9FcXVhbChbXG4gICAgICAgICAgICAgICAgXCIuLS0gMVwiLFxuICAgICAgICAgICAgICAgIFwiKyAyXCIsXG4gICAgICAgICAgICAgICAgXCInLS0gM1wiXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgc3BsYXkgbWlkZGxlIHZhbHVlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXQgPSBTb3J0ZWRTZXQoWzEsIDIsIDNdKTtcbiAgICAgICAgICAgIHNldC5nZXQoMik7XG4gICAgICAgICAgICBzZXQuZGVsZXRlKDEpO1xuICAgICAgICAgICAgZXhwZWN0KGRyYXcoc2V0KSkudG9FcXVhbChbXG4gICAgICAgICAgICAgICAgXCIrIDJcIixcbiAgICAgICAgICAgICAgICBcIictLSAzXCJcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJzdWJ0cmVlIGxlbmd0aHNcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXcoc2V0KSB7XG4gICAgICAgICAgICB2YXIgbGluZXMgPSBbXTtcbiAgICAgICAgICAgIHNldC5sb2coVHJlZUxvZy5hc2NpaSwgZnVuY3Rpb24gKG5vZGUsIHdyaXRlLCB3cml0ZUFib3ZlKSB7XG4gICAgICAgICAgICAgICAgd3JpdGUoXCIgXCIgKyBub2RlLnZhbHVlICsgXCIgbGVuZ3RoPVwiICsgbm9kZS5sZW5ndGgpO1xuICAgICAgICAgICAgfSwgbGluZXMucHVzaCwgbGluZXMpO1xuICAgICAgICAgICAgcmV0dXJuIGxpbmVzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZXhwZWN0Tm9kZVRvSGF2ZUNvcnJlY3RTdWJ0cmVlTGVuZ3Rocyhub2RlKSB7XG4gICAgICAgICAgICBpZiAoIW5vZGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gMTtcbiAgICAgICAgICAgIGxlbmd0aCArPSBleHBlY3ROb2RlVG9IYXZlQ29ycmVjdFN1YnRyZWVMZW5ndGhzKG5vZGUubGVmdCk7XG4gICAgICAgICAgICBsZW5ndGggKz0gZXhwZWN0Tm9kZVRvSGF2ZUNvcnJlY3RTdWJ0cmVlTGVuZ3Rocyhub2RlLnJpZ2h0KTtcbiAgICAgICAgICAgIGV4cGVjdChub2RlLmxlbmd0aCkudG9CZShsZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIGxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGl0KFwiKzFcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldCA9IFNvcnRlZFNldChbMV0pO1xuICAgICAgICAgICAgZXhwZWN0KGRyYXcoc2V0KSkudG9FcXVhbChbXG4gICAgICAgICAgICAgICAgXCItIDEgbGVuZ3RoPTFcIlxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3ROb2RlVG9IYXZlQ29ycmVjdFN1YnRyZWVMZW5ndGhzKHNldC5yb290KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCIrMSwgKzJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldCA9IFNvcnRlZFNldChbMSwgMl0pO1xuICAgICAgICAgICAgZXhwZWN0KGRyYXcoc2V0KSkudG9FcXVhbChbXG4gICAgICAgICAgICAgICAgXCIuLS0gMSBsZW5ndGg9MVwiLFxuICAgICAgICAgICAgICAgIFwiKyAyIGxlbmd0aD0yXCJcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0Tm9kZVRvSGF2ZUNvcnJlY3RTdWJ0cmVlTGVuZ3RocyhzZXQucm9vdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiKzEsICsyLCAxXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXQgPSBTb3J0ZWRTZXQoWzEsIDJdKTtcbiAgICAgICAgICAgIHNldC5nZXQoMSk7XG4gICAgICAgICAgICBleHBlY3QoZHJhdyhzZXQpKS50b0VxdWFsKFtcbiAgICAgICAgICAgICAgICBcIisgMSBsZW5ndGg9MlwiLFxuICAgICAgICAgICAgICAgIFwiJy0tIDIgbGVuZ3RoPTFcIlxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3ROb2RlVG9IYXZlQ29ycmVjdFN1YnRyZWVMZW5ndGhzKHNldC5yb290KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCIrMSwgKzMsICsyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXQgPSBTb3J0ZWRTZXQoWzEsIDMsIDJdKTtcbiAgICAgICAgICAgIGV4cGVjdChkcmF3KHNldCkpLnRvRXF1YWwoW1xuICAgICAgICAgICAgICAgIFwiLi0tIDEgbGVuZ3RoPTFcIixcbiAgICAgICAgICAgICAgICBcIisgMiBsZW5ndGg9M1wiLFxuICAgICAgICAgICAgICAgIFwiJy0tIDMgbGVuZ3RoPTFcIlxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3ROb2RlVG9IYXZlQ29ycmVjdFN1YnRyZWVMZW5ndGhzKHNldC5yb290KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gbWFrZUNhc2UoZGVzY3JpcHRpb24sIG9wZXJhdGlvbnMsIGxvZykge1xuICAgICAgICAgICAgaXQoZGVzY3JpcHRpb24gKyBcIiBcIiArIG9wZXJhdGlvbnMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0ID0gU29ydGVkU2V0KCk7XG4gICAgICAgICAgICAgICAgRnV6ei5leGVjdXRlKHNldCwgRnV6ei5wYXJzZShvcGVyYXRpb25zKSwgbG9nKTtcbiAgICAgICAgICAgICAgICBleHBlY3ROb2RlVG9IYXZlQ29ycmVjdFN1YnRyZWVMZW5ndGhzKHNldC5yb290KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbWFrZUNhc2UoXCJyZWR1Y3Rpb24gb2YgY2FzZSB3aXRoIHByb3BhZ2F0aW9uIGlzc3VlXCIsIFwiKzIsICs0LCArMywgKzEsIDRcIik7XG5cbiAgICAgICAgLy8gNTAgZnV6eiBjYXNlc1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDUwOyBpKyspIHtcbiAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZ1enogPSBGdXp6Lm1ha2UoaSAqIDUsIGksIE1hdGgubWF4KDEwLCBpICogNSkpO1xuICAgICAgICAgICAgICAgIG1ha2VDYXNlKFwiZnV6elwiLCBGdXp6LnN0cmluZ2lmeShmdXp6KSk7XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwic3BsYXlJbmRleFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGl0KFwic2hvdWxkIGZpbmQgdGhlIGluZGV4IG9mIGV2ZXJ5IGVsZW1lbnRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG51bWJlcnMgPSBbMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNV07XG4gICAgICAgICAgICB2YXIgcmFuZCA9IEZ1enoubWFrZVJhbmRvbSgwKTtcbiAgICAgICAgICAgIG51bWJlcnMuc29ydChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhbmQoKSAtIC41O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgc2V0ID0gU29ydGVkU2V0KG51bWJlcnMpO1xuICAgICAgICAgICAgbnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgICAgIHNldC5zcGxheUluZGV4KGluZGV4KTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LnJvb3QuaW5kZXgpLnRvQmUoaW5kZXgpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQucm9vdC52YWx1ZSkudG9CZShpbmRleCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImluZGV4T2ZcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBmdXp6IGNhc2VzXG4gICAgICAgIGZvciAodmFyIHNlZWQgPSAwOyBzZWVkIDwgMjA7IHNlZWQrKykge1xuICAgICAgICAgICAgKGZ1bmN0aW9uIChzZWVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bWJlcnMgPSBbMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNV07XG4gICAgICAgICAgICAgICAgdmFyIHJhbmQgPSBGdXp6Lm1ha2VSYW5kb20oc2VlZCk7XG4gICAgICAgICAgICAgICAgbnVtYmVycy5zb3J0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJhbmQoKSAtIC41O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGl0KFwic2hvdWxkIGRpc2Nlcm4gdGhlIHBvc2l0aW9uIG9mIGV2ZXJ5IHZhbHVlIGluIFwiICsgbnVtYmVycy5qb2luKFwiLCBcIiksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNldCA9IFNvcnRlZFNldChudW1iZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChuLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmluZGV4T2YobikpLnRvQmUobik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkoc2VlZCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiZmluZCBtZXRob2RzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNldCA9IG5ldyBTb3J0ZWRTZXQoWzIyLCAyMywgMSwgMzQsIDE5LCA1LCAyNiwgMTIsIDI3LCAzMCwgMjEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyMCwgNiwgNywgMiwgMzIsIDEwLCA5LCAzMywgMywgMTEsIDE3LCAyOCwgMTVdKTtcblxuICAgICAgICBkZXNjcmliZShcImZpbmRcIiwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIGl0KFwic2hvdWxkIGZpbmQgdGhlIG5vZGUgZm9yIGV4aXN0aW5nIHZhbHVlc1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmQoMSkudmFsdWUpLnRvQmUoMSk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kKDUpLnZhbHVlKS50b0JlKDUpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZCg5KS52YWx1ZSkudG9CZSg5KTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmQoMzApLnZhbHVlKS50b0JlKDMwKTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmQoMzQpLnZhbHVlKS50b0JlKDM0KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gdW5kZWZpbmVkIGZvciBub24tZXhpc3RlbnQgdmFsdWVzXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZCg0KSkudG9CZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZCgxMykpLnRvQmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmQoMzEpKS50b0JlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBkZXNjcmliZShcImZpbmRHcmVhdGVzdFwiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiB0aGUgaGlnaGVzdCB2YWx1ZSBpbiB0aGUgc2V0XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZEdyZWF0ZXN0KCkudmFsdWUpLnRvQmUoMzQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVzY3JpYmUoXCJmaW5kTGVhc3RcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gdGhlIGxvd2VzdCB2YWx1ZSBpbiB0aGUgc2V0XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZExlYXN0KCkudmFsdWUpLnRvQmUoMSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBkZXNjcmliZShcImZpbmRHcmVhdGVzdExlc3NUaGFuT3JFcXVhbFwiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiB2YWx1ZXMgdGhhdCBleGlzdCBpbiB0aGUgc2V0XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZEdyZWF0ZXN0TGVzc1RoYW5PckVxdWFsKDUpLnZhbHVlKS50b0JlKDUpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZEdyZWF0ZXN0TGVzc1RoYW5PckVxdWFsKDcpLnZhbHVlKS50b0JlKDcpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZEdyZWF0ZXN0TGVzc1RoYW5PckVxdWFsKDkpLnZhbHVlKS50b0JlKDkpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiB0aGUgbmV4dCBoaWdoZXN0IHZhbHVlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZEdyZWF0ZXN0TGVzc1RoYW5PckVxdWFsKDE0KS52YWx1ZSkudG9CZSgxMik7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kR3JlYXRlc3RMZXNzVGhhbk9yRXF1YWwoMjQpLnZhbHVlKS50b0JlKDIzKTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmRHcmVhdGVzdExlc3NUaGFuT3JFcXVhbCgzMSkudmFsdWUpLnRvQmUoMzApO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZEdyZWF0ZXN0TGVzc1RoYW5PckVxdWFsKDQpLnZhbHVlKS50b0JlKDMpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZEdyZWF0ZXN0TGVzc1RoYW5PckVxdWFsKDI5KS52YWx1ZSkudG9CZSgyOCk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kR3JlYXRlc3RMZXNzVGhhbk9yRXF1YWwoMjUpLnZhbHVlKS50b0JlKDIzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gdW5kZWZpbmVkIGZvciB2YWx1ZXMgb3V0IG9mIHJhbmdlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZEdyZWF0ZXN0TGVzc1RoYW5PckVxdWFsKDApKS50b0JlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBkZXNjcmliZShcImZpbmRHcmVhdGVzdExlc3NUaGFuXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIG5leHQgaGlnaGVzdCBmb3IgdmFsdWVzIHRoYXQgZXhpc3QgaW4gdGhlIHNldFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmRHcmVhdGVzdExlc3NUaGFuKDUpLnZhbHVlKS50b0JlKDMpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZEdyZWF0ZXN0TGVzc1RoYW4oNykudmFsdWUpLnRvQmUoNik7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kR3JlYXRlc3RMZXNzVGhhbig5KS52YWx1ZSkudG9CZSg3KTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmRHcmVhdGVzdExlc3NUaGFuKDI2KS52YWx1ZSkudG9CZSgyMyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIHRoZSBuZXh0IGhpZ2hlc3QgdmFsdWVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kR3JlYXRlc3RMZXNzVGhhbigxNCkudmFsdWUpLnRvQmUoMTIpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZEdyZWF0ZXN0TGVzc1RoYW4oMjQpLnZhbHVlKS50b0JlKDIzKTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmRHcmVhdGVzdExlc3NUaGFuKDMxKS52YWx1ZSkudG9CZSgzMCk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kR3JlYXRlc3RMZXNzVGhhbig0KS52YWx1ZSkudG9CZSgzKTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmRHcmVhdGVzdExlc3NUaGFuKDI5KS52YWx1ZSkudG9CZSgyOCk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kR3JlYXRlc3RMZXNzVGhhbigyNSkudmFsdWUpLnRvQmUoMjMpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIHVuZGVmaW5lZCBmb3IgdmFsdWUgYXQgYm90dG9tIG9mIHJhbmdlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZEdyZWF0ZXN0TGVzc1RoYW4oMSkpLnRvQmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlc2NyaWJlKFwiZmluZExlYXN0R3JlYXRlclRoYW5PckVxdWFsXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIHZhbHVlcyB0aGF0IGV4aXN0IGluIHRoZSBzZXRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kTGVhc3RHcmVhdGVyVGhhbk9yRXF1YWwoNSkudmFsdWUpLnRvQmUoNSk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kTGVhc3RHcmVhdGVyVGhhbk9yRXF1YWwoNykudmFsdWUpLnRvQmUoNyk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kTGVhc3RHcmVhdGVyVGhhbk9yRXF1YWwoOSkudmFsdWUpLnRvQmUoOSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIHRoZSBuZXh0IHZhbHVlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZExlYXN0R3JlYXRlclRoYW5PckVxdWFsKDEzKS52YWx1ZSkudG9CZSgxNSk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kTGVhc3RHcmVhdGVyVGhhbk9yRXF1YWwoMjQpLnZhbHVlKS50b0JlKDI2KTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmRMZWFzdEdyZWF0ZXJUaGFuT3JFcXVhbCgzMSkudmFsdWUpLnRvQmUoMzIpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZExlYXN0R3JlYXRlclRoYW5PckVxdWFsKDQpLnZhbHVlKS50b0JlKDUpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZExlYXN0R3JlYXRlclRoYW5PckVxdWFsKDI5KS52YWx1ZSkudG9CZSgzMCk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kTGVhc3RHcmVhdGVyVGhhbk9yRXF1YWwoMjUpLnZhbHVlKS50b0JlKDI2KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gdW5kZWZpbmVkIGZvciB2YWx1ZXMgb3V0IG9mIHJhbmdlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZExlYXN0R3JlYXRlclRoYW5PckVxdWFsKDM2KSkudG9CZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVzY3JpYmUoXCJmaW5kTGVhc3RHcmVhdGVyVGhhblwiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBuZXh0IHZhbHVlIGZvciB2YWx1ZXMgdGhhdCBleGlzdCBpbiB0aGUgc2V0XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZExlYXN0R3JlYXRlclRoYW4oNSkudmFsdWUpLnRvQmUoNik7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kTGVhc3RHcmVhdGVyVGhhbig3KS52YWx1ZSkudG9CZSg5KTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmRMZWFzdEdyZWF0ZXJUaGFuKDkpLnZhbHVlKS50b0JlKDEwKTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmRMZWFzdEdyZWF0ZXJUaGFuKDI2KS52YWx1ZSkudG9CZSgyNyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIHRoZSBuZXh0IHZhbHVlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZExlYXN0R3JlYXRlclRoYW4oMTQpLnZhbHVlKS50b0JlKDE1KTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2V0LmZpbmRMZWFzdEdyZWF0ZXJUaGFuKDI0KS52YWx1ZSkudG9CZSgyNik7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kTGVhc3RHcmVhdGVyVGhhbigzMSkudmFsdWUpLnRvQmUoMzIpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZExlYXN0R3JlYXRlclRoYW4oNCkudmFsdWUpLnRvQmUoNSk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kTGVhc3RHcmVhdGVyVGhhbigyOSkudmFsdWUpLnRvQmUoMzApO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzZXQuZmluZExlYXN0R3JlYXRlclRoYW4oMjUpLnZhbHVlKS50b0JlKDI2KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gdW5kZWZpbmVkIGZvciB2YWx1ZSBhdCB0b3Agb2YgcmFuZ2VcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHNldC5maW5kTGVhc3RHcmVhdGVyVGhhbigzNCkpLnRvQmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImFkZFJhbmdlQ2hhbmdlTGlzdGVuZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBmdXp6IGNhc2VzXG4gICAgICAgIGZvciAodmFyIHNlZWQgPSAwOyBzZWVkIDwgMjA7IHNlZWQrKykge1xuICAgICAgICAgICAgKGZ1bmN0aW9uIChzZWVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bWJlcnMgPSBbMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNV07XG4gICAgICAgICAgICAgICAgdmFyIHJhbmQgPSBGdXp6Lm1ha2VSYW5kb20oc2VlZCk7XG4gICAgICAgICAgICAgICAgbnVtYmVycy5zb3J0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJhbmQoKSAtIC41O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGl0KFwic2hvdWxkIGJpbmQgY29udGVudCBjaGFuZ2VzIHRvIGFuIGFycmF5IGZvciBcIiArIG51bWJlcnMuam9pbihcIiwgXCIpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtaXJyb3IgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNldCA9IFNvcnRlZFNldCgpO1xuICAgICAgICAgICAgICAgICAgICBzZXQuYWRkUmFuZ2VDaGFuZ2VMaXN0ZW5lcihmdW5jdGlvbiAocGx1cywgbWludXMsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaXJyb3Iuc3dhcChpbmRleCwgbWludXMubGVuZ3RoLCBwbHVzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldC5hZGRFYWNoKG51bWJlcnMpO1xuICAgICAgICAgICAgICAgICAgICBleHBlY3QobWlycm9yLmxlbmd0aCkudG9CZShzZXQubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgbWlycm9yLmZvckVhY2goZnVuY3Rpb24gKG4sIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChuKS50b0JlKGkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pKHNlZWQpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImxvZyBkcmF3aW5nc1wiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhdyhzZXQpIHtcbiAgICAgICAgICAgIHZhciBsaW5lcyA9IFtdO1xuICAgICAgICAgICAgc2V0LmxvZyh7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uOiBcIitcIixcbiAgICAgICAgICAgICAgICB0aHJvdWdoOiBcIi1cIixcbiAgICAgICAgICAgICAgICBicmFuY2hVcDogXCJeXCIsXG4gICAgICAgICAgICAgICAgYnJhbmNoRG93bjogXCJ2XCIsXG4gICAgICAgICAgICAgICAgZnJvbUJlbG93OiBcIi5cIixcbiAgICAgICAgICAgICAgICBmcm9tQWJvdmU6IFwiJ1wiLFxuICAgICAgICAgICAgICAgIGZyb21Cb3RoOiBcInhcIixcbiAgICAgICAgICAgICAgICBzdHJhZmU6IFwifFwiXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAobm9kZSwgd3JpdGUsIHdyaXRlQWJvdmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IFwiXCIgKyBub2RlLnZhbHVlO1xuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBsaW5lLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgcnVsZSA9IEFycmF5KGxlbmd0aCArIDEpLmpvaW4oXCItXCIpO1xuICAgICAgICAgICAgICAgIHdyaXRlQWJvdmUoXCIgKy1cIiArIHJ1bGUgKyBcIi0rXCIpO1xuICAgICAgICAgICAgICAgIHdyaXRlKFwiLXwgXCIgKyBsaW5lICsgXCIgfFwiKTtcbiAgICAgICAgICAgICAgICB3cml0ZShcIiArLVwiICsgcnVsZSArIFwiLStcIik7XG4gICAgICAgICAgICB9LCBsaW5lcy5wdXNoLCBsaW5lcyk7XG4gICAgICAgICAgICByZXR1cm4gbGluZXM7XG4gICAgICAgIH1cblxuICAgICAgICBpdChcInNob3VsZCBkcmF3IGEgc2ltcGxlIGJveFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2V0ID0gU29ydGVkU2V0KFsxXSk7XG4gICAgICAgICAgICBleHBlY3QoZHJhdyhzZXQpKS50b0VxdWFsKFtcbiAgICAgICAgICAgICAgICBcIiAgKy0tLStcIixcbiAgICAgICAgICAgICAgICBcIi0tfCAxIHxcIixcbiAgICAgICAgICAgICAgICBcIiAgKy0tLStcIlxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGRyYXcgYSBncmFwaCBvZiB0d28gYXNjZW5kaW5nXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXQgPSBTb3J0ZWRTZXQoWzEsIDJdKTtcbiAgICAgICAgICAgIGV4cGVjdChkcmF3KHNldCkpLnRvRXF1YWwoW1xuICAgICAgICAgICAgICAgIFwiICAgICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCIuLS0tfCAxIHxcIixcbiAgICAgICAgICAgICAgICBcInwgICArLS0tK1wiLFxuICAgICAgICAgICAgICAgIFwifCArLS0tK1wiLFxuICAgICAgICAgICAgICAgIFwiXi18IDIgfFwiLFxuICAgICAgICAgICAgICAgIFwiICArLS0tK1wiXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgZHJhdyBhIGdyYXBoIG9mIHR3byBkZXNjZW5kaW5nXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXQgPSBTb3J0ZWRTZXQoWzIsIDFdKTtcbiAgICAgICAgICAgIGV4cGVjdChkcmF3KHNldCkpLnRvRXF1YWwoW1xuICAgICAgICAgICAgICAgIFwiICArLS0tK1wiLFxuICAgICAgICAgICAgICAgIFwidi18IDEgfFwiLFxuICAgICAgICAgICAgICAgIFwifCArLS0tK1wiLFxuICAgICAgICAgICAgICAgIFwifCAgICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCInLS0tfCAyIHxcIixcbiAgICAgICAgICAgICAgICBcIiAgICArLS0tK1wiXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgZHJhdyBhIGdyYXBoIG9mIHRocmVlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXQgPSBTb3J0ZWRTZXQoWzMsIDEsIDJdKTtcbiAgICAgICAgICAgIGV4cGVjdChkcmF3KHNldCkpLnRvRXF1YWwoW1xuICAgICAgICAgICAgICAgIFwiICAgICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCIuLS0tfCAxIHxcIixcbiAgICAgICAgICAgICAgICBcInwgICArLS0tK1wiLFxuICAgICAgICAgICAgICAgIFwifCArLS0tK1wiLFxuICAgICAgICAgICAgICAgIFwiKy18IDIgfFwiLFxuICAgICAgICAgICAgICAgIFwifCArLS0tK1wiLFxuICAgICAgICAgICAgICAgIFwifCAgICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCInLS0tfCAzIHxcIixcbiAgICAgICAgICAgICAgICBcIiAgICArLS0tK1wiXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgZHJhdyBhIGNvbXBsZXggZ3JhcGhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldCA9IFNvcnRlZFNldChbOCwgNiwgNSwgMywgNywgMiwgMSwgNF0pO1xuICAgICAgICAgICAgZXhwZWN0KGRyYXcoc2V0KSkudG9FcXVhbChbXG4gICAgICAgICAgICAgICAgXCIgICAgICArLS0tK1wiLFxuICAgICAgICAgICAgICAgIFwiICAuLS0tfCAxIHxcIixcbiAgICAgICAgICAgICAgICBcIiAgfCAgICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCIgIHwgKy0tLStcIixcbiAgICAgICAgICAgICAgICBcIi4tKy18IDIgfFwiLFxuICAgICAgICAgICAgICAgIFwifCB8ICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCJ8IHwgICArLS0tK1wiLFxuICAgICAgICAgICAgICAgIFwifCAnLS0tfCAzIHxcIixcbiAgICAgICAgICAgICAgICBcInwgICAgICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCJ8ICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCIrLXwgNCB8XCIsXG4gICAgICAgICAgICAgICAgXCJ8ICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCJ8ICAgKy0tLStcIixcbiAgICAgICAgICAgICAgICBcIictdi18IDUgfFwiLFxuICAgICAgICAgICAgICAgIFwiICB8ICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCIgIHwgICAgICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCIgIHwgLi0tLXwgNiB8XCIsXG4gICAgICAgICAgICAgICAgXCIgIHwgfCAgICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCIgIHwgfCArLS0tK1wiLFxuICAgICAgICAgICAgICAgIFwiICAnLSstfCA3IHxcIixcbiAgICAgICAgICAgICAgICBcIiAgICB8ICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCIgICAgfCAgICstLS0rXCIsXG4gICAgICAgICAgICAgICAgXCIgICAgJy0tLXwgOCB8XCIsXG4gICAgICAgICAgICAgICAgXCIgICAgICAgICstLS0rXCJcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG59KTtcbiJdfQ==