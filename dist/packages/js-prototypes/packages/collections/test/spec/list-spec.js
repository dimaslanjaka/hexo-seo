"use strict";
var List = require("collections/list");
var describeDeque = require("./deque");
var describeCollection = require("./collection");
var describeRangeChanges = require("./listen/range-changes");
var describeToJson = require("./to-json");
describe("List-spec", function () {
    // new List()
    // List()
    // List(values)
    // List(values, equals)
    // List(values, null, content)
    // List(values).find(value)
    // List(values, equals).find(value)
    // List(values, equals).find(value, equals)
    // List(values).findLast(value)
    // List(values, equals).findLast(value)
    // List(values, equals).findLast(value, equals)
    // List(values).has(value)
    // List(values).has(value, equals)
    // List(values).get(value)
    // List(values, equals).get(value)
    // List(values, equals).get(value, equals)
    // List(values).delete(value)
    // List(values, equals).delete(value)
    // List(values, equals).delete(value, equals)
    // List(values).cleare()
    // List(values).reverse()
    // List(values).reduce(callback, basis, thisp)
    // List(values).reduceRight(callback, basis, thisp)
    // List(values).equals(list)
    // List(values).equals(array)
    // List([only]).only()
    // List([]).only()
    // List(many).only()
    // List([]).one()
    // List([one]).one()
    // List(many).one()
    // List(values).iterate()
    // List(values) node.delete()
    // List(values) node.addBefore(node)
    // List(values) node.addAfter(node)
    // List(values).{add,remove}RangeChangeListener
    //      add
    //      delete
    //      push
    //      pop
    //      shift
    //      unshift
    //      splice
    //      swap
    // List(values).{add,remove}BeforeRangeChangeListener
    //      add
    //      delete
    //      push
    //      pop
    //      shift
    //      unshift
    //      splice
    //      swap
    // push, pop, shift, unshift, slice, splice with numeric indicies
    describeDeque(List);
    // construction, has, add, get, delete
    describeCollection(List, [1, 2, 3, 4], true);
    describeCollection(List, [{ id: 0 }, { id: 1 }, { id: 2 }, { id: 3 }], true);
    describe("equals", function () {
        var list = List();
        it("should be reflexive", function () {
            expect(list.equals(list)).toBe(true);
        });
        it("should be better than nothing", function () {
            expect(list.equals()).toBe(false);
        });
    });
    describe("compare", function () {
        var list = List();
        it("should be reflexive", function () {
            expect(list.compare(list)).toBe(0);
        });
        it("should be better than nothing", function () {
            expect(list.compare()).toBe(1);
        });
    });
    describe("find", function () {
        it("should find every value in a list", function () {
            var list = List([1, 2, 3, 4]);
            expect(list.find(1)).toBe(list.head.next);
            expect(list.find(2)).toBe(list.head.next.next);
            expect(list.find(3)).toBe(list.head.next.next.next);
            expect(list.find(4)).toBe(list.head.next.next.next.next);
            expect(list.find(4)).toBe(list.head.prev);
            expect(list.find(3)).toBe(list.head.prev.prev);
            expect(list.find(2)).toBe(list.head.prev.prev.prev);
            expect(list.find(1)).toBe(list.head.prev.prev.prev.prev);
        });
        it("should the first of equivalent values", function () {
            var list = List([0, 1, 1, 0]);
            expect(list.find(0)).toBe(list.head.next);
            expect(list.find(1)).toBe(list.head.next.next);
        });
        it("should find values before startIndex", function () {
            var list = List([2, 3, 2, 3]);
            expect(list.find(2, null, 1)).toBe(list.head.next.next.next);
        });
        it("should use startIndex inclusively", function () {
            var list = List([2, 3, 2, 3]);
            expect(list.find(3, null, 1)).toBe(list.head.next.next);
        });
    });
    describe("findLast", function () {
        it("should find every value in a list", function () {
            var list = List([1, 2, 3, 4]);
            expect(list.findLast(1)).toBe(list.head.next);
            expect(list.findLast(2)).toBe(list.head.next.next);
            expect(list.findLast(3)).toBe(list.head.next.next.next);
            expect(list.findLast(4)).toBe(list.head.next.next.next.next);
            expect(list.findLast(4)).toBe(list.head.prev);
            expect(list.findLast(3)).toBe(list.head.prev.prev);
            expect(list.findLast(2)).toBe(list.head.prev.prev.prev);
            expect(list.findLast(1)).toBe(list.head.prev.prev.prev.prev);
        });
        it("should prefer later equivalent values", function () {
            var list = List([0, 1, 1, 0]);
            expect(list.findLast(0)).toBe(list.head.prev);
            expect(list.findLast(1)).toBe(list.head.prev.prev);
        });
        it("should find values before endIndex", function () {
            var list = List([2, 3, 2, 3]);
            expect(list.findLast(2, null, 1)).toBe(list.head.next);
        });
        it("should use endIndex inclusively", function () {
            var list = List([2, 3, 2, 3]);
            expect(list.findLast(3, null, 1)).toBe(list.head.next.next);
        });
    });
    // additional constraints on splice with regard to how it behaves when the
    // offset is provided as a node instead of a number
    describe("splice with nodes", function () {
        it("should splice to end with only an offset argument", function () {
            var collection = List([1, 2, 3, 4]);
            expect(collection.splice(collection.find(3))).toEqual([3, 4]);
            expect(collection.toArray()).toEqual([1, 2]);
        });
        it("should splice nothing with no length", function () {
            var collection = List([1, 2, 3, 4]);
            expect(collection.splice(collection.find(3), 0)).toEqual([]);
            expect(collection.toArray()).toEqual([1, 2, 3, 4]);
        });
        it("should splice one value", function () {
            var collection = List([1, 2, 3, 4]);
            expect(collection.splice(collection.find(3), 1)).toEqual([3]);
            expect(collection.toArray()).toEqual([1, 2, 4]);
        });
        it("should splice all values", function () {
            var collection = List([1, 2, 3, 4]);
            expect(collection.splice(collection.head.next, collection.length)).toEqual([1, 2, 3, 4]);
            expect(collection.toArray()).toEqual([]);
        });
        it("should splice all values with implied length", function () {
            var collection = List([1, 2, 3, 4]);
            expect(collection.splice(collection.head.next)).toEqual([1, 2, 3, 4]);
            expect(collection.toArray()).toEqual([]);
        });
    });
    describe("deleteAll", function () {
        it("deletes all equivalent values", function () {
            var anyEven = {
                equals: function (that) {
                    return that % 2 === 0;
                }
            };
            var collection = List([1, 2, 3, 4, 5]);
            expect(collection.deleteAll(anyEven)).toBe(2);
            expect(collection.toArray()).toEqual([1, 3, 5]);
            expect(collection.length).toBe(3);
        });
    });
    describeRangeChanges(List);
    describeToJson(List, [1, 2, 3, 4]);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC1zcGVjLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyJwYWNrYWdlcy9qcy1wcm90b3R5cGVzL3BhY2thZ2VzL2NvbGxlY3Rpb25zL3Rlc3Qvc3BlYy9saXN0LXNwZWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUN2QyxJQUFJLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUNqRCxJQUFJLG9CQUFvQixHQUFHLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0FBQzdELElBQUksY0FBYyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUUxQyxRQUFRLENBQUMsV0FBVyxFQUFFO0lBQ2xCLGFBQWE7SUFDYixTQUFTO0lBQ1QsZUFBZTtJQUNmLHVCQUF1QjtJQUN2Qiw4QkFBOEI7SUFDOUIsMkJBQTJCO0lBQzNCLG1DQUFtQztJQUNuQywyQ0FBMkM7SUFDM0MsK0JBQStCO0lBQy9CLHVDQUF1QztJQUN2QywrQ0FBK0M7SUFDL0MsMEJBQTBCO0lBQzFCLGtDQUFrQztJQUNsQywwQkFBMEI7SUFDMUIsa0NBQWtDO0lBQ2xDLDBDQUEwQztJQUMxQyw2QkFBNkI7SUFDN0IscUNBQXFDO0lBQ3JDLDZDQUE2QztJQUM3Qyx3QkFBd0I7SUFDeEIseUJBQXlCO0lBQ3pCLDhDQUE4QztJQUM5QyxtREFBbUQ7SUFDbkQsNEJBQTRCO0lBQzVCLDZCQUE2QjtJQUM3QixzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLG9CQUFvQjtJQUNwQixpQkFBaUI7SUFDakIsb0JBQW9CO0lBQ3BCLG1CQUFtQjtJQUNuQix5QkFBeUI7SUFDekIsNkJBQTZCO0lBQzdCLG9DQUFvQztJQUNwQyxtQ0FBbUM7SUFFbkMsK0NBQStDO0lBQy9DLFdBQVc7SUFDWCxjQUFj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QUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDMUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDL0MsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3BELE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0QsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsdUNBQXVDLEVBQUU7WUFDeEMsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ25ELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHNDQUFzQyxFQUFFO1lBQ3ZDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDakUsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsbUNBQW1DLEVBQUU7WUFDcEMsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVELENBQUMsQ0FBQyxDQUFDO0lBRVAsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsVUFBVSxFQUFFO1FBRWpCLEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRTtZQUNwQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDOUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbkQsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3hELE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDN0QsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNuRCxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDeEQsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNqRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRTtZQUN4QyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDOUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFB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LENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsb0JBQW9CLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFFdkMsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbnZhciBMaXN0ID0gcmVxdWlyZShcImNvbGxlY3Rpb25zL2xpc3RcIik7XG52YXIgZGVzY3JpYmVEZXF1ZSA9IHJlcXVpcmUoXCIuL2RlcXVlXCIpO1xudmFyIGRlc2NyaWJlQ29sbGVjdGlvbiA9IHJlcXVpcmUoXCIuL2NvbGxlY3Rpb25cIik7XG52YXIgZGVzY3JpYmVSYW5nZUNoYW5nZXMgPSByZXF1aXJlKFwiLi9saXN0ZW4vcmFuZ2UtY2hhbmdlc1wiKTtcbnZhciBkZXNjcmliZVRvSnNvbiA9IHJlcXVpcmUoXCIuL3RvLWpzb25cIik7XG5cbmRlc2NyaWJlKFwiTGlzdC1zcGVjXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBuZXcgTGlzdCgpXG4gICAgLy8gTGlzdCgpXG4gICAgLy8gTGlzdCh2YWx1ZXMpXG4gICAgLy8gTGlzdCh2YWx1ZXMsIGVxdWFscylcbiAgICAvLyBMaXN0KHZhbHVlcywgbnVsbCwgY29udGVudClcbiAgICAvLyBMaXN0KHZhbHVlcykuZmluZCh2YWx1ZSlcbiAgICAvLyBMaXN0KHZhbHVlcywgZXF1YWxzKS5maW5kKHZhbHVlKVxuICAgIC8vIExpc3QodmFsdWVzLCBlcXVhbHMpLmZpbmQodmFsdWUsIGVxdWFscylcbiAgICAvLyBMaXN0KHZhbHVlcykuZmluZExhc3QodmFsdWUpXG4gICAgLy8gTGlzdCh2YWx1ZXMsIGVxdWFscykuZmluZExhc3QodmFsdWUpXG4gICAgLy8gTGlzdCh2YWx1ZXMsIGVxdWFscykuZmluZExhc3QodmFsdWUsIGVxdWFscylcbiAgICAvLyBMaXN0KHZhbHVlcykuaGFzKHZhbHVlKVxuICAgIC8vIExpc3QodmFsdWVzKS5oYXModmFsdWUsIGVxdWFscylcbiAgICAvLyBMaXN0KHZhbHVlcykuZ2V0KHZhbHVlKVxuICAgIC8vIExpc3QodmFsdWVzLCBlcXVhbHMpLmdldCh2YWx1ZSlcbiAgICAvLyBMaXN0KHZhbHVlcywgZXF1YWxzKS5nZXQodmFsdWUsIGVxdWFscylcbiAgICAvLyBMaXN0KHZhbHVlcykuZGVsZXRlKHZhbHVlKVxuICAgIC8vIExpc3QodmFsdWVzLCBlcXVhbHMpLmRlbGV0ZSh2YWx1ZSlcbiAgICAvLyBMaXN0KHZhbHVlcywgZXF1YWxzKS5kZWxldGUodmFsdWUsIGVxdWFscylcbiAgICAvLyBMaXN0KHZhbHVlcykuY2xlYXJlKClcbiAgICAvLyBMaXN0KHZhbHVlcykucmV2ZXJzZSgpXG4gICAgLy8gTGlzdCh2YWx1ZXMpLnJlZHVjZShjYWxsYmFjaywgYmFzaXMsIHRoaXNwKVxuICAgIC8vIExpc3QodmFsdWVzKS5yZWR1Y2VSaWdodChjYWxsYmFjaywgYmFzaXMsIHRoaXNwKVxuICAgIC8vIExpc3QodmFsdWVzKS5lcXVhbHMobGlzdClcbiAgICAvLyBMaXN0KHZhbHVlcykuZXF1YWxzKGFycmF5KVxuICAgIC8vIExpc3QoW29ubHldKS5vbmx5KClcbiAgICAvLyBMaXN0KFtdKS5vbmx5KClcbiAgICAvLyBMaXN0KG1hbnkpLm9ubHkoKVxuICAgIC8vIExpc3QoW10pLm9uZSgpXG4gICAgLy8gTGlzdChbb25lXSkub25lKClcbiAgICAvLyBMaXN0KG1hbnkpLm9uZSgpXG4gICAgLy8gTGlzdCh2YWx1ZXMpLml0ZXJhdGUoKVxuICAgIC8vIExpc3QodmFsdWVzKSBub2RlLmRlbGV0ZSgpXG4gICAgLy8gTGlzdCh2YWx1ZXMpIG5vZGUuYWRkQmVmb3JlKG5vZGUpXG4gICAgLy8gTGlzdCh2YWx1ZXMpIG5vZGUuYWRkQWZ0ZXIobm9kZSlcblxuICAgIC8vIExpc3QodmFsdWVzKS57YWRkLHJlbW92ZX1SYW5nZUNoYW5nZUxpc3RlbmVyXG4gICAgLy8gICAgICBhZGRcbiAgICAvLyAgICAgIGRlbGV0ZVxuICAgIC8vICAgICAgcHVzaFxuICAgIC8vICAgICAgcG9wXG4gICAgLy8gICAgICBzaGlmdFxuICAgIC8vICAgICAgdW5zaGlmdFxuICAgIC8vICAgICAgc3BsaWNlXG4gICAgLy8gICAgICBzd2FwXG4gICAgLy8gTGlzdCh2YWx1ZXMpLnthZGQscmVtb3ZlfUJlZm9yZVJhbmdlQ2hhbmdlTGlzdGVuZXJcbiAgICAvLyAgICAgIGFkZFxuICAgIC8vICAgICAgZGVsZXRlXG4gICAgLy8gICAgICBwdXNoXG4gICAgLy8gICAgICBwb3BcbiAgICAvLyAgICAgIHNoaWZ0XG4gICAgLy8gICAgICB1bnNoaWZ0XG4gICAgLy8gICAgICBzcGxpY2VcbiAgICAvLyAgICAgIHN3YXBcblxuICAgIC8vIHB1c2gsIHBvcCwgc2hpZnQsIHVuc2hpZnQsIHNsaWNlLCBzcGxpY2Ugd2l0aCBudW1lcmljIGluZGljaWVzXG4gICAgZGVzY3JpYmVEZXF1ZShMaXN0KTtcblxuICAgIC8vIGNvbnN0cnVjdGlvbiwgaGFzLCBhZGQsIGdldCwgZGVsZXRlXG4gICAgZGVzY3JpYmVDb2xsZWN0aW9uKExpc3QsIFsxLCAyLCAzLCA0XSwgdHJ1ZSk7XG4gICAgZGVzY3JpYmVDb2xsZWN0aW9uKExpc3QsIFt7aWQ6IDB9LCB7aWQ6IDF9LCB7aWQ6IDJ9LCB7aWQ6IDN9XSwgdHJ1ZSk7XG5cbiAgICBkZXNjcmliZShcImVxdWFsc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsaXN0ID0gTGlzdCgpO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGJlIHJlZmxleGl2ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBleHBlY3QobGlzdC5lcXVhbHMobGlzdCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGJlIGJldHRlciB0aGFuIG5vdGhpbmdcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZXF1YWxzKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJjb21wYXJlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpc3QgPSBMaXN0KCk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgYmUgcmVmbGV4aXZlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV4cGVjdChsaXN0LmNvbXBhcmUobGlzdCkpLnRvQmUoMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGJlIGJldHRlciB0aGFuIG5vdGhpbmdcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuY29tcGFyZSgpKS50b0JlKDEpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJmaW5kXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpdChcInNob3VsZCBmaW5kIGV2ZXJ5IHZhbHVlIGluIGEgbGlzdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbGlzdCA9IExpc3QoWzEsIDIsIDMsIDRdKTtcbiAgICAgICAgICAgIGV4cGVjdChsaXN0LmZpbmQoMSkpLnRvQmUobGlzdC5oZWFkLm5leHQpO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZCgyKSkudG9CZShsaXN0LmhlYWQubmV4dC5uZXh0KTtcbiAgICAgICAgICAgIGV4cGVjdChsaXN0LmZpbmQoMykpLnRvQmUobGlzdC5oZWFkLm5leHQubmV4dC5uZXh0KTtcbiAgICAgICAgICAgIGV4cGVjdChsaXN0LmZpbmQoNCkpLnRvQmUobGlzdC5oZWFkLm5leHQubmV4dC5uZXh0Lm5leHQpO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZCg0KSkudG9CZShsaXN0LmhlYWQucHJldik7XG4gICAgICAgICAgICBleHBlY3QobGlzdC5maW5kKDMpKS50b0JlKGxpc3QuaGVhZC5wcmV2LnByZXYpO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZCgyKSkudG9CZShsaXN0LmhlYWQucHJldi5wcmV2LnByZXYpO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZCgxKSkudG9CZShsaXN0LmhlYWQucHJldi5wcmV2LnByZXYucHJldik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIHRoZSBmaXJzdCBvZiBlcXVpdmFsZW50IHZhbHVlc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbGlzdCA9IExpc3QoWzAsIDEsIDEsIDBdKTtcbiAgICAgICAgICAgIGV4cGVjdChsaXN0LmZpbmQoMCkpLnRvQmUobGlzdC5oZWFkLm5leHQpO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZCgxKSkudG9CZShsaXN0LmhlYWQubmV4dC5uZXh0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgZmluZCB2YWx1ZXMgYmVmb3JlIHN0YXJ0SW5kZXhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxpc3QgPSBMaXN0KFsyLCAzLCAyLCAzXSk7XG4gICAgICAgICAgICBleHBlY3QobGlzdC5maW5kKDIsIG51bGwsIDEpKS50b0JlKGxpc3QuaGVhZC5uZXh0Lm5leHQubmV4dCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIHVzZSBzdGFydEluZGV4IGluY2x1c2l2ZWx5XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsaXN0ID0gTGlzdChbMiwgMywgMiwgM10pO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZCgzLCBudWxsLCAxKSkudG9CZShsaXN0LmhlYWQubmV4dC5uZXh0KTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiZmluZExhc3RcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGZpbmQgZXZlcnkgdmFsdWUgaW4gYSBsaXN0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsaXN0ID0gTGlzdChbMSwgMiwgMywgNF0pO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZExhc3QoMSkpLnRvQmUobGlzdC5oZWFkLm5leHQpO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZExhc3QoMikpLnRvQmUobGlzdC5oZWFkLm5leHQubmV4dCk7XG4gICAgICAgICAgICBleHBlY3QobGlzdC5maW5kTGFzdCgzKSkudG9CZShsaXN0LmhlYWQubmV4dC5uZXh0Lm5leHQpO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZExhc3QoNCkpLnRvQmUobGlzdC5oZWFkLm5leHQubmV4dC5uZXh0Lm5leHQpO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZExhc3QoNCkpLnRvQmUobGlzdC5oZWFkLnByZXYpO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZExhc3QoMykpLnRvQmUobGlzdC5oZWFkLnByZXYucHJldik7XG4gICAgICAgICAgICBleHBlY3QobGlzdC5maW5kTGFzdCgyKSkudG9CZShsaXN0LmhlYWQucHJldi5wcmV2LnByZXYpO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZExhc3QoMSkpLnRvQmUobGlzdC5oZWFkLnByZXYucHJldi5wcmV2LnByZXYpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBwcmVmZXIgbGF0ZXIgZXF1aXZhbGVudCB2YWx1ZXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxpc3QgPSBMaXN0KFswLCAxLCAxLCAwXSk7XG4gICAgICAgICAgICBleHBlY3QobGlzdC5maW5kTGFzdCgwKSkudG9CZShsaXN0LmhlYWQucHJldik7XG4gICAgICAgICAgICBleHBlY3QobGlzdC5maW5kTGFzdCgxKSkudG9CZShsaXN0LmhlYWQucHJldi5wcmV2KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgZmluZCB2YWx1ZXMgYmVmb3JlIGVuZEluZGV4XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsaXN0ID0gTGlzdChbMiwgMywgMiwgM10pO1xuICAgICAgICAgICAgZXhwZWN0KGxpc3QuZmluZExhc3QoMiwgbnVsbCwgMSkpLnRvQmUobGlzdC5oZWFkLm5leHQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCB1c2UgZW5kSW5kZXggaW5jbHVzaXZlbHlcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxpc3QgPSBMaXN0KFsyLCAzLCAyLCAzXSk7XG4gICAgICAgICAgICBleHBlY3QobGlzdC5maW5kTGFzdCgzLCBudWxsLCAxKSkudG9CZShsaXN0LmhlYWQubmV4dC5uZXh0KTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIC8vIGFkZGl0aW9uYWwgY29uc3RyYWludHMgb24gc3BsaWNlIHdpdGggcmVnYXJkIHRvIGhvdyBpdCBiZWhhdmVzIHdoZW4gdGhlXG4gICAgLy8gb2Zmc2V0IGlzIHByb3ZpZGVkIGFzIGEgbm9kZSBpbnN0ZWFkIG9mIGEgbnVtYmVyXG4gICAgZGVzY3JpYmUoXCJzcGxpY2Ugd2l0aCBub2Rlc1wiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgc3BsaWNlIHRvIGVuZCB3aXRoIG9ubHkgYW4gb2Zmc2V0IGFyZ3VtZW50XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gTGlzdChbMSwgMiwgMywgNF0pO1xuICAgICAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24uc3BsaWNlKGNvbGxlY3Rpb24uZmluZCgzKSkpLnRvRXF1YWwoWzMsIDRdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLnRvQXJyYXkoKSkudG9FcXVhbChbMSwgMl0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBzcGxpY2Ugbm90aGluZyB3aXRoIG5vIGxlbmd0aFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IExpc3QoWzEsIDIsIDMsIDRdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLnNwbGljZShjb2xsZWN0aW9uLmZpbmQoMyksIDApKS50b0VxdWFsKFtdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLnRvQXJyYXkoKSkudG9FcXVhbChbMSwgMiwgMywgNF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBzcGxpY2Ugb25lIHZhbHVlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gTGlzdChbMSwgMiwgMywgNF0pO1xuICAgICAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24uc3BsaWNlKGNvbGxlY3Rpb24uZmluZCgzKSwgMSkpLnRvRXF1YWwoWzNdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLnRvQXJyYXkoKSkudG9FcXVhbChbMSwgMiwgNF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBzcGxpY2UgYWxsIHZhbHVlc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IExpc3QoWzEsIDIsIDMsIDRdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLnNwbGljZShjb2xsZWN0aW9uLmhlYWQubmV4dCwgY29sbGVjdGlvbi5sZW5ndGgpKS50b0VxdWFsKFsxLCAyLCAzLCA0XSk7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi50b0FycmF5KCkpLnRvRXF1YWwoW10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBzcGxpY2UgYWxsIHZhbHVlcyB3aXRoIGltcGxpZWQgbGVuZ3RoXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gTGlzdChbMSwgMiwgMywgNF0pO1xuICAgICAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24uc3BsaWNlKGNvbGxlY3Rpb24uaGVhZC5uZXh0KSkudG9FcXVhbChbMSwgMiwgMywgNF0pO1xuICAgICAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24udG9BcnJheSgpKS50b0VxdWFsKFtdKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiZGVsZXRlQWxsXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaXQoXCJkZWxldGVzIGFsbCBlcXVpdmFsZW50IHZhbHVlc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYW55RXZlbiA9IHtcbiAgICAgICAgICAgICAgICBlcXVhbHM6IGZ1bmN0aW9uICh0aGF0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0ICUgMiA9PT0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBMaXN0KFsxLCAyLCAzLCA0LCA1XSk7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5kZWxldGVBbGwoYW55RXZlbikpLnRvQmUoMik7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi50b0FycmF5KCkpLnRvRXF1YWwoWzEsIDMsIDVdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmxlbmd0aCkudG9CZSgzKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZVJhbmdlQ2hhbmdlcyhMaXN0KTtcbiAgICBkZXNjcmliZVRvSnNvbihMaXN0LCBbMSwgMiwgMywgNF0pO1xuXG59KTtcbiJdfQ==