"use strict";
// Array, List, Set, FastSet, unbounded LruSet.
// SortedSet does not qualify since these objects are incomparable.
// Array#get() behaves like a Map, not a Set, so it is excluded from those
// tests.
module.exports = describeCollection;
function describeCollection(Collection, values, setLike) {
    var a = values[0];
    var b = values[1];
    var c = values[2];
    var d = values[3];
    function shouldHaveTheUsualContent(collection) {
        expect(collection.has(a)).toBe(true);
        expect(collection.has(b)).toBe(true);
        expect(collection.has(c)).toBe(true);
        expect(collection.has(d)).toBe(false);
        if (setLike) {
            expect(collection.get(a)).toBe(a);
            expect(collection.get(b)).toBe(b);
            expect(collection.get(c)).toBe(c);
            expect(collection.get(d)).toBe(undefined);
        }
        expect(collection.length).toBe(3);
    }
    it("should be constructable from an array", function () {
        var collection = Collection.from([a, b, c]);
        shouldHaveTheUsualContent(collection);
    });
    it("should be constructable from an foreachable", function () {
        var collection = Collection.from({
            forEach: function (callback, thisp) {
                callback.call(thisp, a);
                callback.call(thisp, b);
                callback.call(thisp, c);
            }
        });
        shouldHaveTheUsualContent(collection);
    });
    describe("add", function () {
        it("should add values to a collection", function () {
            var collection = new Collection();
            // expect(collection.add(a)).toBe(true);
            // expect(collection.add(b)).toBe(true);
            // expect(collection.add(c)).toBe(true);
            collection.add(a);
            collection.add(b);
            collection.add(c);
            shouldHaveTheUsualContent(collection);
        });
    });
    describe("delete", function () {
        it("should remove a value from the beginning of a collection", function () {
            var collection = Collection.from([d, a, b, c]);
            expect(collection.delete(d)).toBe(true);
            shouldHaveTheUsualContent(collection);
        });
        it("should remove a value from the middle of a collection", function () {
            var collection = Collection.from([a, d, b, c]);
            expect(collection.delete(d)).toBe(true);
            shouldHaveTheUsualContent(collection);
        });
        it("should remove a value from the end of a collection", function () {
            var collection = Collection.from([a, b, c, d]);
            expect(collection.delete(d)).toBe(true);
            shouldHaveTheUsualContent(collection);
        });
        it("should fail to remove a value not in a collection", function () {
            var collection = Collection.from([a, b, c]);
            expect(collection.delete(d)).toBe(false);
            shouldHaveTheUsualContent(collection);
        });
    });
    describe("one", function () {
        it("should return a value in the collection", function () {
            var collection = Collection.from([a, b, c, d]);
            expect(collection.has(collection.one())).toBe(true);
        });
        it("should throw an error for an empty collection", function () {
            var collection = new Collection();
            expect(collection.one()).toBe(undefined);
        });
    });
    describe("only", function () {
        it("should return a value in the collection", function () {
            var collection = Collection.from([a]);
            expect(collection.only()).toBe(a);
        });
        it("should be undefined if there are no values in the collection", function () {
            expect(new Collection().only()).toBeUndefined();
        });
        it("should be undefined if there are many values in the collection", function () {
            expect(Collection.from([a, b]).only()).toBeUndefined();
        });
    });
    describe("clear", function () {
        it("should delete all values", function () {
            var collection = Collection.from([a, b, c, d]);
            expect(collection.length).toBe(4);
            collection.clear();
            expect(collection.toArray()).toEqual([]);
            expect(collection.length).toBe(0);
        });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGVjdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIuLyIsInNvdXJjZXMiOlsicGFja2FnZXMvanMtcHJvdG90eXBlcy9wYWNrYWdlcy9jb2xsZWN0aW9ucy90ZXN0L3NwZWMvY29sbGVjdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsK0NBQStDO0FBQy9DLG1FQUFtRTtBQUNuRSwwRUFBMEU7QUFDMUUsU0FBUztBQUVULE1BQU0sQ0FBQyxPQUFPLEdBQUcsa0JBQWtCLENBQUM7QUFDcEMsU0FBUyxrQkFBa0IsQ0FBQyxVQUFVLEVBQUUsTUFBTSxFQUFFLE9BQU87SUFFbkQsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xCLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQixJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEIsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWxCLFNBQVMseUJBQXlCLENBQUMsVUFBVTtRQUN6QyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNyQyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNyQyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNyQyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN0QyxJQUFJLE9BQU8sRUFBRTtZQUNULE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFD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QUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUVQLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBBcnJheSwgTGlzdCwgU2V0LCBGYXN0U2V0LCB1bmJvdW5kZWQgTHJ1U2V0LlxuLy8gU29ydGVkU2V0IGRvZXMgbm90IHF1YWxpZnkgc2luY2UgdGhlc2Ugb2JqZWN0cyBhcmUgaW5jb21wYXJhYmxlLlxuLy8gQXJyYXkjZ2V0KCkgYmVoYXZlcyBsaWtlIGEgTWFwLCBub3QgYSBTZXQsIHNvIGl0IGlzIGV4Y2x1ZGVkIGZyb20gdGhvc2Vcbi8vIHRlc3RzLlxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlc2NyaWJlQ29sbGVjdGlvbjtcbmZ1bmN0aW9uIGRlc2NyaWJlQ29sbGVjdGlvbihDb2xsZWN0aW9uLCB2YWx1ZXMsIHNldExpa2UpIHtcblxuICAgIHZhciBhID0gdmFsdWVzWzBdO1xuICAgIHZhciBiID0gdmFsdWVzWzFdO1xuICAgIHZhciBjID0gdmFsdWVzWzJdO1xuICAgIHZhciBkID0gdmFsdWVzWzNdO1xuXG4gICAgZnVuY3Rpb24gc2hvdWxkSGF2ZVRoZVVzdWFsQ29udGVudChjb2xsZWN0aW9uKSB7XG4gICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmhhcyhhKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24uaGFzKGIpKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5oYXMoYykpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmhhcyhkKSkudG9CZShmYWxzZSk7XG4gICAgICAgIGlmIChzZXRMaWtlKSB7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5nZXQoYSkpLnRvQmUoYSk7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5nZXQoYikpLnRvQmUoYik7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5nZXQoYykpLnRvQmUoYyk7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5nZXQoZCkpLnRvQmUodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5sZW5ndGgpLnRvQmUoMyk7XG4gICAgfVxuXG4gICAgaXQoXCJzaG91bGQgYmUgY29uc3RydWN0YWJsZSBmcm9tIGFuIGFycmF5XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBDb2xsZWN0aW9uLmZyb20oW2EsIGIsIGNdKTtcbiAgICAgICAgc2hvdWxkSGF2ZVRoZVVzdWFsQ29udGVudChjb2xsZWN0aW9uKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGJlIGNvbnN0cnVjdGFibGUgZnJvbSBhbiBmb3JlYWNoYWJsZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb2xsZWN0aW9uID0gQ29sbGVjdGlvbi5mcm9tKHtcbiAgICAgICAgICAgIGZvckVhY2g6IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc3ApIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNwLCBhKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNwLCBiKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNwLCBjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNob3VsZEhhdmVUaGVVc3VhbENvbnRlbnQoY29sbGVjdGlvbik7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImFkZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGl0KFwic2hvdWxkIGFkZCB2YWx1ZXMgdG8gYSBjb2xsZWN0aW9uXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gbmV3IENvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIC8vIGV4cGVjdChjb2xsZWN0aW9uLmFkZChhKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIC8vIGV4cGVjdChjb2xsZWN0aW9uLmFkZChiKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIC8vIGV4cGVjdChjb2xsZWN0aW9uLmFkZChjKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24uYWRkKGEpO1xuICAgICAgICAgICAgY29sbGVjdGlvbi5hZGQoYik7XG4gICAgICAgICAgICBjb2xsZWN0aW9uLmFkZChjKTtcbiAgICAgICAgICAgIHNob3VsZEhhdmVUaGVVc3VhbENvbnRlbnQoY29sbGVjdGlvbik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJkZWxldGVcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGl0KFwic2hvdWxkIHJlbW92ZSBhIHZhbHVlIGZyb20gdGhlIGJlZ2lubmluZyBvZiBhIGNvbGxlY3Rpb25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBDb2xsZWN0aW9uLmZyb20oW2QsIGEsIGIsIGNdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmRlbGV0ZShkKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIHNob3VsZEhhdmVUaGVVc3VhbENvbnRlbnQoY29sbGVjdGlvbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIHJlbW92ZSBhIHZhbHVlIGZyb20gdGhlIG1pZGRsZSBvZiBhIGNvbGxlY3Rpb25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBDb2xsZWN0aW9uLmZyb20oW2EsIGQsIGIsIGNdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmRlbGV0ZShkKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIHNob3VsZEhhdmVUaGVVc3VhbENvbnRlbnQoY29sbGVjdGlvbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIHJlbW92ZSBhIHZhbHVlIGZyb20gdGhlIGVuZCBvZiBhIGNvbGxlY3Rpb25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBDb2xsZWN0aW9uLmZyb20oW2EsIGIsIGMsIGRdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmRlbGV0ZShkKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIHNob3VsZEhhdmVUaGVVc3VhbENvbnRlbnQoY29sbGVjdGlvbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGZhaWwgdG8gcmVtb3ZlIGEgdmFsdWUgbm90IGluIGEgY29sbGVjdGlvblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IENvbGxlY3Rpb24uZnJvbShbYSwgYiwgY10pO1xuICAgICAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24uZGVsZXRlKGQpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIHNob3VsZEhhdmVUaGVVc3VhbENvbnRlbnQoY29sbGVjdGlvbik7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIm9uZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBhIHZhbHVlIGluIHRoZSBjb2xsZWN0aW9uXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gQ29sbGVjdGlvbi5mcm9tKFthLCBiLCBjLCBkXSk7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5oYXMoY29sbGVjdGlvbi5vbmUoKSkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIHRocm93IGFuIGVycm9yIGZvciBhbiBlbXB0eSBjb2xsZWN0aW9uXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gbmV3IENvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLm9uZSgpKS50b0JlKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJvbmx5XCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpdChcInNob3VsZCByZXR1cm4gYSB2YWx1ZSBpbiB0aGUgY29sbGVjdGlvblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IENvbGxlY3Rpb24uZnJvbShbYV0pO1xuICAgICAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24ub25seSgpKS50b0JlKGEpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBiZSB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG5vIHZhbHVlcyBpbiB0aGUgY29sbGVjdGlvblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBleHBlY3QobmV3IENvbGxlY3Rpb24oKS5vbmx5KCkpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgYmUgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBtYW55IHZhbHVlcyBpbiB0aGUgY29sbGVjdGlvblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBleHBlY3QoQ29sbGVjdGlvbi5mcm9tKFthLCBiXSkub25seSgpKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImNsZWFyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaXQoXCJzaG91bGQgZGVsZXRlIGFsbCB2YWx1ZXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBDb2xsZWN0aW9uLmZyb20oW2EsIGIsIGMsIGRdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmxlbmd0aCkudG9CZSg0KTtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24uY2xlYXIoKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLnRvQXJyYXkoKSkudG9FcXVhbChbXSk7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5sZW5ndGgpLnRvQmUoMCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59XG4iXX0=