"use strict";
var GenericCollection = require("collections/generic-collection");
module.exports = describeOrder;
function describeOrder(Collection) {
    /*
        The following tests are from Montage.
        Copyright (c) 2012, Motorola Mobility LLC.
        All Rights Reserved.
        BSD License.
    */
    // contains 10, 20, 30
    function FakeArray() {
        this.length = 3;
    }
    Object.addEach(FakeArray.prototype, GenericCollection.prototype);
    FakeArray.prototype.reduce = function (callback, basis) {
        basis = callback(basis, 10, 0, this);
        basis = callback(basis, 20, 1, this);
        basis = callback(basis, 30, 2, this);
        return basis;
    };
    var fakeArray = new FakeArray();
    describe("equals", function () {
        it("identifies itself", function () {
            var collection = Collection([1, 2]);
            expect(collection.equals(collection)).toBe(true);
        });
        it("distinguishes incomparable objects", function () {
            expect(Collection([]).equals(null)).toEqual(false);
        });
        it("compares itself to an array-like collection", function () {
            expect(Collection([10, 20, 30]).equals(fakeArray)).toEqual(true);
        });
    });
    describe("compare", function () {
        it("compares to itself", function () {
            var collection = Collection([1, 2]);
            expect(collection.compare(collection)).toBe(0);
        });
        // contains 10, 20, 30
        it("a fake array should be equal to collection", function () {
            expect(Object.compare(fakeArray, Collection([10, 20, 30]))).toEqual(-0);
        });
        it("a fake array should be less than a collection", function () {
            expect(Object.compare(fakeArray, Collection([10, 30]))).toEqual(-10);
        });
        it("a fake array should be greater than a real array because it is longer", function () {
            expect(Object.compare(fakeArray, Collection([10, 20]))).toEqual(1);
        });
        it("a fake array should be less than a longer but otherwise equal", function () {
            expect(Object.compare(fakeArray, Collection([10, 20, 30, 40]))).toEqual(-1);
        });
        it("an array should be equal to a fake array", function () {
            expect(Collection([10, 20, 30]).compare(fakeArray)).toEqual(0);
        });
        it("an array should be greater than a fake array", function () {
            expect(Collection([10, 30]).compare(fakeArray)).toEqual(10);
        });
        it("an array should be less than a fake array because it is shorter but otherwise equal", function () {
            expect(Collection([10, 20]).compare(fakeArray)).toEqual(-1);
        });
        it("an array should be less than a fake array because it is longer but otherwise equal", function () {
            expect(Collection([10, 20, 30, 40]).compare(fakeArray)).toEqual(1);
        });
    });
    describe("indexOf", function () {
        if (!Collection.prototype.indexOf)
            return;
        it("finds first value", function () {
            var collection = Collection([1, 2, 3]);
            expect(collection.indexOf(2)).toBe(1);
        });
        it("finds first identical value", function () {
            if (Collection.prototype.isSet)
                return;
            var collection = Collection([1, 1, 2, 2, 3, 3]);
            expect(collection.indexOf(2)).toBe(2);
        });
        it("finds first value after index", function () {
            if (Collection.prototype.isSet || Collection.prototype.isSorted)
                return;
            var collection = Collection([1, 2, 3, 1, 2, 3]);
            expect(collection.indexOf(2, 3)).toBe(4);
        });
        it("finds first value after negative index", function () {
            if (Collection.prototype.isSet || Collection.prototype.isSorted)
                return;
            var collection = Collection([1, 2, 3, 1, 2, 3]);
            expect(collection.indexOf(2, -3)).toBe(4);
        });
    });
    describe("lastIndexOf", function () {
        if (!Collection.prototype.lastIndexOf)
            return;
        it("finds last value", function () {
            var collection = Collection([1, 2, 3]);
            expect(collection.lastIndexOf(2)).toBe(1);
        });
        it("finds last identical value", function () {
            if (Collection.prototype.isSet)
                return;
            var collection = Collection([1, 1, 2, 2, 3, 3]);
            expect(collection.lastIndexOf(2)).toBe(3);
        });
        it("finds the last value before index", function () {
            if (Collection.prototype.isSet || Collection.prototype.isSorted)
                return;
            var collection = Collection([1, 2, 3, 1, 2, 3]);
            expect(collection.lastIndexOf(2, 3)).toBe(1);
        });
        it("finds the last value before negative index", function () {
            if (Collection.prototype.isSet || Collection.prototype.isSorted)
                return;
            var collection = Collection([1, 2, 3, 1, 2, 3]);
            expect(collection.lastIndexOf(2, -3)).toBe(1);
        });
    });
    describe("find (deprecated support)", function () {
        it("finds equivalent values", function () {
            expect(Collection([10, 10, 10]).find(10)).toEqual(0);
        });
        it("finds equivalent values", function () {
            expect(Collection([10, 10, 10]).find(10)).toEqual(0);
        });
    });
    describe("findValue", function () {
        it("finds equivalent values", function () {
            expect(Collection([10, 10, 10]).findValue(10)).toEqual(0);
        });
        it("finds equivalent values", function () {
            expect(Collection([10, 10, 10]).findValue(10)).toEqual(0);
        });
    });
    describe("findLast (deprecated support)", function () {
        it("finds equivalent values", function () {
            expect(Collection([10, 10, 10]).findLast(10)).toEqual(2);
        });
    });
    describe("findLastValue", function () {
        it("finds equivalent values", function () {
            expect(Collection([10, 10, 10]).findLastValue(10)).toEqual(2);
        });
    });
    describe("has", function () {
        it("finds equivalent values", function () {
            expect(Collection([10]).has(10)).toBe(true);
        });
        it("does not find absent values", function () {
            expect(Collection([]).has(-1)).toBe(false);
        });
    });
    describe("has", function () {
        it("finds a value", function () {
            var collection = Collection([1, 2, 3]);
            expect(collection.has(2)).toBe(true);
        });
        it("does not find an absent value", function () {
            var collection = Collection([1, 2, 3]);
            expect(collection.has(4)).toBe(false);
        });
        // TODO
        // it("makes use of equality override", function () {
        //     var collection = Collection([1, 2, 3]);
        //     expect(collection.has(4, function (a, b) {
        //         return a - 1 === b;
        //     })).toBe(true);
        // });
    });
    describe("any", function () {
        var tests = [
            [[0, false], false],
            [["0"], true],
            [[{}], true],
            [[{ a: 10 }], true],
            [[0, 1, 0], true],
            [[1, 1, 1], true],
            [[true, true, true], true],
            [[0, 0, 0, true], true],
            [[], false],
            [[false, false, false], false]
        ];
        tests.forEach(function (test) {
            it(JSON.stringify(test[0]) + ".any() should be " + test[1], function () {
                expect(Collection(test[0]).any()).toEqual(test[1]);
            });
        });
    });
    describe("all", function () {
        var tests = [
            [[], true],
            [[true], true],
            [[1], true],
            [[{}], true],
            [[false, true, true, true], false]
        ];
        tests.forEach(function (test) {
            it(JSON.stringify(test[0]) + ".all() should be " + test[1], function () {
                expect(Collection(test[0]).all()).toEqual(test[1]);
            });
        });
    });
    describe("min", function () {
        it("finds the minimum of numeric values", function () {
            expect(Collection([1, 2, 3]).min()).toEqual(1);
        });
    });
    describe("max", function () {
        it("finds the maximum of numeric values", function () {
            expect(Collection([1, 2, 3]).max()).toEqual(3);
        });
    });
    describe("sum", function () {
        it("computes the sum of numeric values", function () {
            expect(Collection([1, 2, 3]).sum()).toEqual(6);
        });
        // sum has deprecated behaviors for implicit flattening and
        // property path mapping, not tested here
    });
    describe("average", function () {
        it("computes the arithmetic mean of values", function () {
            expect(Collection([1, 2, 3]).average()).toEqual(2);
        });
    });
    describe("flatten", function () {
        it("flattens an array one level", function () {
            var collection = Collection([
                [[1, 2, 3], [4, 5, 6]],
                Collection([[7, 8, 9], [10, 11, 12]])
            ]);
            expect(collection.flatten()).toEqual([
                [1, 2, 3],
                [4, 5, 6],
                [7, 8, 9],
                [10, 11, 12]
            ]);
        });
    });
    describe("one", function () {
        it("gets the first value", function () {
            expect(Collection([0]).one()).toEqual(0);
        });
        it("throws if empty", function () {
            expect(Collection([]).one()).toBe(undefined);
        });
    });
    describe("only", function () {
        it("gets the first value", function () {
            expect(Collection([0]).only()).toEqual(0);
        });
        it("is undefined if empty", function () {
            expect(Collection([]).only()).toBeUndefined();
        });
        it("is undefined if more than one value", function () {
            expect(Collection([1, 2]).only()).toBeUndefined();
        });
    });
    describe("clone", function () {
        // should have been adequately covered by Object.clone tests
        it("should clone with indefinite depth", function () {
            var collection = Collection([[[]]]);
            var clone = collection.clone();
            expect(clone).toEqual(collection);
            expect(clone).not.toBe(collection);
        });
        it("should clone with depth 0", function () {
            var collection = Collection([]);
            expect(collection.clone(0)).toBe(collection);
        });
        it("should clone with depth 1", function () {
            var collection = [Collection({})];
            expect(collection.clone(1)).not.toBe(collection);
            expect(collection.clone(1).one()).toBe(collection.one());
        });
        it("should clone with depth 2", function () {
            var collection = Collection([{ a: 10 }]);
            expect(collection.clone(2)).not.toBe(collection);
            expect(collection.clone(2).one()).not.toBe(collection.one());
            expect(collection.clone(2).one()).toEqual(collection.one());
        });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JkZXIuanMiLCJzb3VyY2VSb290IjoiLi8iLCJzb3VyY2VzIjpbInBhY2thZ2VzL2pzLXByb3RvdHlwZXMvcGFja2FnZXMvY29sbGVjdGlvbnMvdGVzdC9zcGVjL29yZGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxJQUFJLGlCQUFpQixHQUFHLE9BQU8sQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0FBRWxFLE1BQU0sQ0FBQyxPQUFPLEdBQUcsYUFBYSxDQUFDO0FBQy9CLFNBQVMsYUFBYSxDQUFDLFVBQVU7SUFFN0I7Ozs7O01BS0U7SUFFRixzQkFBc0I7SUFDdEIsU0FBUyxTQUFTO1FBQ2QsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDcEIsQ0FBQztJQUNELE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNqRSxTQUFTLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxVQUFVLFFBQVEsRUFBRSxLQUFLO1FBQ2xELEtBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDckMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNyQyxLQUFLLEdBQUcsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3JDLE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUMsQ0FBQztJQUNGLElBQUksU0FBUyxHQUFHLElBQUksU0FBUyxFQUFFLENBQUM7SUFFaEMsUUFBUSxDQUFDLFFBQVEsRUFBRTtRQUVmLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRTtZQUNwQixJQUFJLFVBQVUsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQyxNQUFNLENB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c0NvbnRlbnQiOlsiXG52YXIgR2VuZXJpY0NvbGxlY3Rpb24gPSByZXF1aXJlKFwiY29sbGVjdGlvbnMvZ2VuZXJpYy1jb2xsZWN0aW9uXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlc2NyaWJlT3JkZXI7XG5mdW5jdGlvbiBkZXNjcmliZU9yZGVyKENvbGxlY3Rpb24pIHtcblxuICAgIC8qXG4gICAgICAgIFRoZSBmb2xsb3dpbmcgdGVzdHMgYXJlIGZyb20gTW9udGFnZS5cbiAgICAgICAgQ29weXJpZ2h0IChjKSAyMDEyLCBNb3Rvcm9sYSBNb2JpbGl0eSBMTEMuXG4gICAgICAgIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gICAgICAgIEJTRCBMaWNlbnNlLlxuICAgICovXG5cbiAgICAvLyBjb250YWlucyAxMCwgMjAsIDMwXG4gICAgZnVuY3Rpb24gRmFrZUFycmF5KCkge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDM7XG4gICAgfVxuICAgIE9iamVjdC5hZGRFYWNoKEZha2VBcnJheS5wcm90b3R5cGUsIEdlbmVyaWNDb2xsZWN0aW9uLnByb3RvdHlwZSk7XG4gICAgRmFrZUFycmF5LnByb3RvdHlwZS5yZWR1Y2UgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGJhc2lzKSB7XG4gICAgICAgIGJhc2lzID0gY2FsbGJhY2soYmFzaXMsIDEwLCAwLCB0aGlzKTtcbiAgICAgICAgYmFzaXMgPSBjYWxsYmFjayhiYXNpcywgMjAsIDEsIHRoaXMpO1xuICAgICAgICBiYXNpcyA9IGNhbGxiYWNrKGJhc2lzLCAzMCwgMiwgdGhpcyk7XG4gICAgICAgIHJldHVybiBiYXNpcztcbiAgICB9O1xuICAgIHZhciBmYWtlQXJyYXkgPSBuZXcgRmFrZUFycmF5KCk7XG5cbiAgICBkZXNjcmliZShcImVxdWFsc1wiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaXQoXCJpZGVudGlmaWVzIGl0c2VsZlwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IENvbGxlY3Rpb24oWzEsIDJdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmVxdWFscyhjb2xsZWN0aW9uKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJkaXN0aW5ndWlzaGVzIGluY29tcGFyYWJsZSBvYmplY3RzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV4cGVjdChDb2xsZWN0aW9uKFtdKS5lcXVhbHMobnVsbCkpLnRvRXF1YWwoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImNvbXBhcmVzIGl0c2VsZiB0byBhbiBhcnJheS1saWtlIGNvbGxlY3Rpb25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KENvbGxlY3Rpb24oWzEwLCAyMCwgMzBdKS5lcXVhbHMoZmFrZUFycmF5KSkudG9FcXVhbCh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiY29tcGFyZVwiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaXQoXCJjb21wYXJlcyB0byBpdHNlbGZcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBDb2xsZWN0aW9uKFsxLCAyXSk7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5jb21wYXJlKGNvbGxlY3Rpb24pKS50b0JlKDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjb250YWlucyAxMCwgMjAsIDMwXG4gICAgICAgIGl0KFwiYSBmYWtlIGFycmF5IHNob3VsZCBiZSBlcXVhbCB0byBjb2xsZWN0aW9uXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV4cGVjdChPYmplY3QuY29tcGFyZShmYWtlQXJyYXksIENvbGxlY3Rpb24oWzEwLCAyMCwgMzBdKSkpLnRvRXF1YWwoLTApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImEgZmFrZSBhcnJheSBzaG91bGQgYmUgbGVzcyB0aGFuIGEgY29sbGVjdGlvblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBleHBlY3QoT2JqZWN0LmNvbXBhcmUoZmFrZUFycmF5LCBDb2xsZWN0aW9uKFsxMCwgMzBdKSkpLnRvRXF1YWwoLTEwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJhIGZha2UgYXJyYXkgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiBhIHJlYWwgYXJyYXkgYmVjYXVzZSBpdCBpcyBsb25nZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KE9iamVjdC5jb21wYXJlKGZha2VBcnJheSwgQ29sbGVjdGlvbihbMTAsIDIwXSkpKS50b0VxdWFsKDEpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImEgZmFrZSBhcnJheSBzaG91bGQgYmUgbGVzcyB0aGFuIGEgbG9uZ2VyIGJ1dCBvdGhlcndpc2UgZXF1YWxcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KE9iamVjdC5jb21wYXJlKGZha2VBcnJheSwgQ29sbGVjdGlvbihbMTAsIDIwLCAzMCwgNDBdKSkpLnRvRXF1YWwoLTEpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImFuIGFycmF5IHNob3VsZCBiZSBlcXVhbCB0byBhIGZha2UgYXJyYXlcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KENvbGxlY3Rpb24oWzEwLCAyMCwgMzBdKS5jb21wYXJlKGZha2VBcnJheSkpLnRvRXF1YWwoMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiYW4gYXJyYXkgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiBhIGZha2UgYXJyYXlcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KENvbGxlY3Rpb24oWzEwLCAzMF0pLmNvbXBhcmUoZmFrZUFycmF5KSkudG9FcXVhbCgxMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiYW4gYXJyYXkgc2hvdWxkIGJlIGxlc3MgdGhhbiBhIGZha2UgYXJyYXkgYmVjYXVzZSBpdCBpcyBzaG9ydGVyIGJ1dCBvdGhlcndpc2UgZXF1YWxcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KENvbGxlY3Rpb24oWzEwLCAyMF0pLmNvbXBhcmUoZmFrZUFycmF5KSkudG9FcXVhbCgtMSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiYW4gYXJyYXkgc2hvdWxkIGJlIGxlc3MgdGhhbiBhIGZha2UgYXJyYXkgYmVjYXVzZSBpdCBpcyBsb25nZXIgYnV0IG90aGVyd2lzZSBlcXVhbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBleHBlY3QoQ29sbGVjdGlvbihbMTAsIDIwLCAzMCwgNDBdKS5jb21wYXJlKGZha2VBcnJheSkpLnRvRXF1YWwoMSk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImluZGV4T2ZcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIUNvbGxlY3Rpb24ucHJvdG90eXBlLmluZGV4T2YpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgaXQoXCJmaW5kcyBmaXJzdCB2YWx1ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IENvbGxlY3Rpb24oWzEsIDIsIDNdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmluZGV4T2YoMikpLnRvQmUoMSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiZmluZHMgZmlyc3QgaWRlbnRpY2FsIHZhbHVlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChDb2xsZWN0aW9uLnByb3RvdHlwZS5pc1NldClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IENvbGxlY3Rpb24oWzEsIDEsIDIsIDIsIDMsIDNdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmluZGV4T2YoMikpLnRvQmUoMik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiZmluZHMgZmlyc3QgdmFsdWUgYWZ0ZXIgaW5kZXhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKENvbGxlY3Rpb24ucHJvdG90eXBlLmlzU2V0IHx8IENvbGxlY3Rpb24ucHJvdG90eXBlLmlzU29ydGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gQ29sbGVjdGlvbihbMSwgMiwgMywgMSwgMiwgM10pO1xuICAgICAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24uaW5kZXhPZigyLCAzKSkudG9CZSg0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJmaW5kcyBmaXJzdCB2YWx1ZSBhZnRlciBuZWdhdGl2ZSBpbmRleFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoQ29sbGVjdGlvbi5wcm90b3R5cGUuaXNTZXQgfHwgQ29sbGVjdGlvbi5wcm90b3R5cGUuaXNTb3J0ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBDb2xsZWN0aW9uKFsxLCAyLCAzLCAxLCAyLCAzXSk7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5pbmRleE9mKDIsIC0zKSkudG9CZSg0KTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwibGFzdEluZGV4T2ZcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIUNvbGxlY3Rpb24ucHJvdG90eXBlLmxhc3RJbmRleE9mKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGl0KFwiZmluZHMgbGFzdCB2YWx1ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IENvbGxlY3Rpb24oWzEsIDIsIDNdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmxhc3RJbmRleE9mKDIpKS50b0JlKDEpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImZpbmRzIGxhc3QgaWRlbnRpY2FsIHZhbHVlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChDb2xsZWN0aW9uLnByb3RvdHlwZS5pc1NldClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IENvbGxlY3Rpb24oWzEsIDEsIDIsIDIsIDMsIDNdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmxhc3RJbmRleE9mKDIpKS50b0JlKDMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImZpbmRzIHRoZSBsYXN0IHZhbHVlIGJlZm9yZSBpbmRleFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoQ29sbGVjdGlvbi5wcm90b3R5cGUuaXNTZXQgfHwgQ29sbGVjdGlvbi5wcm90b3R5cGUuaXNTb3J0ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBDb2xsZWN0aW9uKFsxLCAyLCAzLCAxLCAyLCAzXSk7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5sYXN0SW5kZXhPZigyLCAzKSkudG9CZSgxKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJmaW5kcyB0aGUgbGFzdCB2YWx1ZSBiZWZvcmUgbmVnYXRpdmUgaW5kZXhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKENvbGxlY3Rpb24ucHJvdG90eXBlLmlzU2V0IHx8IENvbGxlY3Rpb24ucHJvdG90eXBlLmlzU29ydGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gQ29sbGVjdGlvbihbMSwgMiwgMywgMSwgMiwgM10pO1xuICAgICAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24ubGFzdEluZGV4T2YoMiwgLTMpKS50b0JlKDEpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJmaW5kIChkZXByZWNhdGVkIHN1cHBvcnQpXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpdChcImZpbmRzIGVxdWl2YWxlbnQgdmFsdWVzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV4cGVjdChDb2xsZWN0aW9uKFsxMCwgMTAsIDEwXSkuZmluZCgxMCkpLnRvRXF1YWwoMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiZmluZHMgZXF1aXZhbGVudCB2YWx1ZXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KENvbGxlY3Rpb24oWzEwLCAxMCwgMTBdKS5maW5kKDEwKSkudG9FcXVhbCgwKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiZmluZFZhbHVlXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpdChcImZpbmRzIGVxdWl2YWxlbnQgdmFsdWVzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV4cGVjdChDb2xsZWN0aW9uKFsxMCwgMTAsIDEwXSkuZmluZFZhbHVlKDEwKSkudG9FcXVhbCgwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJmaW5kcyBlcXVpdmFsZW50IHZhbHVlc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBleHBlY3QoQ29sbGVjdGlvbihbMTAsIDEwLCAxMF0pLmZpbmRWYWx1ZSgxMCkpLnRvRXF1YWwoMCk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImZpbmRMYXN0IChkZXByZWNhdGVkIHN1cHBvcnQpXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpdChcImZpbmRzIGVxdWl2YWxlbnQgdmFsdWVzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV4cGVjdChDb2xsZWN0aW9uKFsxMCwgMTAsIDEwXSkuZmluZExhc3QoMTApKS50b0VxdWFsKDIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiZmluZExhc3RWYWx1ZVwiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaXQoXCJmaW5kcyBlcXVpdmFsZW50IHZhbHVlc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBleHBlY3QoQ29sbGVjdGlvbihbMTAsIDEwLCAxMF0pLmZpbmRMYXN0VmFsdWUoMTApKS50b0VxdWFsKDIpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJoYXNcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGl0KFwiZmluZHMgZXF1aXZhbGVudCB2YWx1ZXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KENvbGxlY3Rpb24oWzEwXSkuaGFzKDEwKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJkb2VzIG5vdCBmaW5kIGFic2VudCB2YWx1ZXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KENvbGxlY3Rpb24oW10pLmhhcygtMSkpLnRvQmUoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJoYXNcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGl0KFwiZmluZHMgYSB2YWx1ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IENvbGxlY3Rpb24oWzEsIDIsIDNdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmhhcygyKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJkb2VzIG5vdCBmaW5kIGFuIGFic2VudCB2YWx1ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IENvbGxlY3Rpb24oWzEsIDIsIDNdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmhhcyg0KSkudG9CZShmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgLy8gaXQoXCJtYWtlcyB1c2Ugb2YgZXF1YWxpdHkgb3ZlcnJpZGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyAgICAgdmFyIGNvbGxlY3Rpb24gPSBDb2xsZWN0aW9uKFsxLCAyLCAzXSk7XG4gICAgICAgIC8vICAgICBleHBlY3QoY29sbGVjdGlvbi5oYXMoNCwgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gYSAtIDEgPT09IGI7XG4gICAgICAgIC8vICAgICB9KSkudG9CZSh0cnVlKTtcbiAgICAgICAgLy8gfSk7XG5cbiAgICB9KTtcblxuXG4gICAgZGVzY3JpYmUoXCJhbnlcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciB0ZXN0cyA9IFtcbiAgICAgICAgICAgIFtbMCwgZmFsc2VdLCBmYWxzZV0sXG4gICAgICAgICAgICBbW1wiMFwiXSwgdHJ1ZV0sXG4gICAgICAgICAgICBbW3t9XSwgdHJ1ZV0sXG4gICAgICAgICAgICBbW3thOiAxMH1dLCB0cnVlXSxcbiAgICAgICAgICAgIFtbMCwgMSwgMF0sIHRydWVdLFxuICAgICAgICAgICAgW1sxLCAxLCAxXSwgdHJ1ZV0sXG4gICAgICAgICAgICBbW3RydWUsIHRydWUsIHRydWVdLCB0cnVlXSxcbiAgICAgICAgICAgIFtbMCwgMCwgMCwgdHJ1ZV0sIHRydWVdLFxuICAgICAgICAgICAgW1tdLCBmYWxzZV0sXG4gICAgICAgICAgICBbW2ZhbHNlLCBmYWxzZSwgZmFsc2VdLCBmYWxzZV1cbiAgICAgICAgXTtcblxuICAgICAgICB0ZXN0cy5mb3JFYWNoKGZ1bmN0aW9uICh0ZXN0KSB7XG4gICAgICAgICAgICBpdChKU09OLnN0cmluZ2lmeSh0ZXN0WzBdKSArIFwiLmFueSgpIHNob3VsZCBiZSBcIiArIHRlc3RbMV0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBleHBlY3QoQ29sbGVjdGlvbih0ZXN0WzBdKS5hbnkoKSkudG9FcXVhbCh0ZXN0WzFdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJhbGxcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciB0ZXN0cyA9IFtcbiAgICAgICAgICAgIFtbXSwgdHJ1ZV0sXG4gICAgICAgICAgICBbW3RydWVdLCB0cnVlXSxcbiAgICAgICAgICAgIFtbMV0sIHRydWVdLFxuICAgICAgICAgICAgW1t7fV0sIHRydWVdLFxuICAgICAgICAgICAgW1tmYWxzZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZV0sIGZhbHNlXVxuICAgICAgICBdO1xuXG4gICAgICAgIHRlc3RzLmZvckVhY2goZnVuY3Rpb24gKHRlc3QpIHtcbiAgICAgICAgICAgIGl0KEpTT04uc3RyaW5naWZ5KHRlc3RbMF0pICsgXCIuYWxsKCkgc2hvdWxkIGJlIFwiICsgdGVzdFsxXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGV4cGVjdChDb2xsZWN0aW9uKHRlc3RbMF0pLmFsbCgpKS50b0VxdWFsKHRlc3RbMV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIm1pblwiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaXQoXCJmaW5kcyB0aGUgbWluaW11bSBvZiBudW1lcmljIHZhbHVlc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBleHBlY3QoQ29sbGVjdGlvbihbMSwgMiwgM10pLm1pbigpKS50b0VxdWFsKDEpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJtYXhcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGl0KFwiZmluZHMgdGhlIG1heGltdW0gb2YgbnVtZXJpYyB2YWx1ZXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KENvbGxlY3Rpb24oWzEsIDIsIDNdKS5tYXgoKSkudG9FcXVhbCgzKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwic3VtXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpdChcImNvbXB1dGVzIHRoZSBzdW0gb2YgbnVtZXJpYyB2YWx1ZXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KENvbGxlY3Rpb24oWzEsIDIsIDNdKS5zdW0oKSkudG9FcXVhbCg2KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gc3VtIGhhcyBkZXByZWNhdGVkIGJlaGF2aW9ycyBmb3IgaW1wbGljaXQgZmxhdHRlbmluZyBhbmRcbiAgICAgICAgLy8gcHJvcGVydHkgcGF0aCBtYXBwaW5nLCBub3QgdGVzdGVkIGhlcmVcblxuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJhdmVyYWdlXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpdChcImNvbXB1dGVzIHRoZSBhcml0aG1ldGljIG1lYW4gb2YgdmFsdWVzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV4cGVjdChDb2xsZWN0aW9uKFsxLCAyLCAzXSkuYXZlcmFnZSgpKS50b0VxdWFsKDIpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJmbGF0dGVuXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpdChcImZsYXR0ZW5zIGFuIGFycmF5IG9uZSBsZXZlbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IENvbGxlY3Rpb24oW1xuICAgICAgICAgICAgICAgIFtbMSwgMiwgM10sIFs0LCA1LCA2XV0sXG4gICAgICAgICAgICAgICAgQ29sbGVjdGlvbihbWzcsIDgsIDldLCBbMTAsIDExLCAxMl1dKVxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3QoY29sbGVjdGlvbi5mbGF0dGVuKCkpLnRvRXF1YWwoW1xuICAgICAgICAgICAgICAgIFsxLCAyLCAzXSxcbiAgICAgICAgICAgICAgICBbNCwgNSwgNl0sXG4gICAgICAgICAgICAgICAgWzcsIDgsIDldLFxuICAgICAgICAgICAgICAgIFsxMCwgMTEsIDEyXVxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIm9uZVwiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaXQoXCJnZXRzIHRoZSBmaXJzdCB2YWx1ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBleHBlY3QoQ29sbGVjdGlvbihbMF0pLm9uZSgpKS50b0VxdWFsKDApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInRocm93cyBpZiBlbXB0eVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBleHBlY3QoQ29sbGVjdGlvbihbXSkub25lKCkpLnRvQmUodW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwib25seVwiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaXQoXCJnZXRzIHRoZSBmaXJzdCB2YWx1ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBleHBlY3QoQ29sbGVjdGlvbihbMF0pLm9ubHkoKSkudG9FcXVhbCgwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJpcyB1bmRlZmluZWQgaWYgZW1wdHlcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXhwZWN0KENvbGxlY3Rpb24oW10pLm9ubHkoKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImlzIHVuZGVmaW5lZCBpZiBtb3JlIHRoYW4gb25lIHZhbHVlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV4cGVjdChDb2xsZWN0aW9uKFsxLCAyXSkub25seSgpKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImNsb25lXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvLyBzaG91bGQgaGF2ZSBiZWVuIGFkZXF1YXRlbHkgY292ZXJlZCBieSBPYmplY3QuY2xvbmUgdGVzdHNcblxuICAgICAgICBpdChcInNob3VsZCBjbG9uZSB3aXRoIGluZGVmaW5pdGUgZGVwdGhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBDb2xsZWN0aW9uKFtbW11dXSk7XG4gICAgICAgICAgICB2YXIgY2xvbmUgPSBjb2xsZWN0aW9uLmNsb25lKCk7XG4gICAgICAgICAgICBleHBlY3QoY2xvbmUpLnRvRXF1YWwoY29sbGVjdGlvbik7XG4gICAgICAgICAgICBleHBlY3QoY2xvbmUpLm5vdC50b0JlKGNvbGxlY3Rpb24pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBjbG9uZSB3aXRoIGRlcHRoIDBcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBDb2xsZWN0aW9uKFtdKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmNsb25lKDApKS50b0JlKGNvbGxlY3Rpb24pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBjbG9uZSB3aXRoIGRlcHRoIDFcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBbQ29sbGVjdGlvbih7fSldO1xuICAgICAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24uY2xvbmUoMSkpLm5vdC50b0JlKGNvbGxlY3Rpb24pO1xuICAgICAgICAgICAgZXhwZWN0KGNvbGxlY3Rpb24uY2xvbmUoMSkub25lKCkpLnRvQmUoY29sbGVjdGlvbi5vbmUoKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGNsb25lIHdpdGggZGVwdGggMlwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IENvbGxlY3Rpb24oW3thOiAxMH1dKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmNsb25lKDIpKS5ub3QudG9CZShjb2xsZWN0aW9uKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmNsb25lKDIpLm9uZSgpKS5ub3QudG9CZShjb2xsZWN0aW9uLm9uZSgpKTtcbiAgICAgICAgICAgIGV4cGVjdChjb2xsZWN0aW9uLmNsb25lKDIpLm9uZSgpKS50b0VxdWFsKGNvbGxlY3Rpb24ub25lKCkpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG59XG5cbiJdfQ==