"use strict";
// Tests that are equally applicable to Map, unbounded LruMap, FastMap.
// These do not apply to SortedMap since keys are not comparable.
var describeMapChanges = require("./listen/map-changes");
module.exports = describeMap;
function describeMap(Map, values) {
    describeMapChanges(Map);
    values = values || [];
    var a = values[0] || {};
    var b = values[1] || {};
    var c = values[2] || {};
    function shouldHaveTheUsualContent(map) {
        expect(map.has(a)).toBe(true);
        expect(map.has(b)).toBe(true);
        expect(map.has(c)).toBe(false);
        expect(map.get(a)).toBe(10);
        expect(map.get(b)).toBe(20);
        expect(map.get(c)).toBe(undefined);
        expect(map.length).toBe(2);
        expect(map.keysArray()).toEqual([a, b]);
        expect(map.valuesArray()).toEqual([10, 20]);
        expect(map.entriesArray()).toEqual([[a, 10], [b, 20]]);
        expect(map.reduce(function (basis, value, key) {
            basis.push([this, key, value]);
            return basis;
        }, [], map)).toEqual([
            [map, a, 10],
            [map, b, 20]
        ]);
        ;
    }
    it("should be constructable from entry duples with object keys", function () {
        var map = new Map([[a, 10], [b, 20]]);
        shouldHaveTheUsualContent(map);
    });
    it("should be constructable from an interable", function () {
        var map = Map.from({
            forEach: function (callback, thisp) {
                callback.call(thisp, [a, 10]);
                callback.call(thisp, [b, 20]);
            }
        });
        shouldHaveTheUsualContent(map);
    });
    it("should support filter", function () {
        var map = Map.from({ a: 10, b: 20, c: 30 });
        expect(map.filter(function (value, key) {
            return key === "a" || value === 30;
        }).entriesArray()).toEqual([
            ["a", 10],
            ["c", 30]
        ]);
    });
    it("should remove one entry", function () {
        var map = new Map([[a, 10], [b, 20], [c, 30]]);
        expect(map.delete(c)).toBe(true);
        shouldHaveTheUsualContent(map);
    });
    it("should be able to delete all content", function () {
        var map = Map.from({ a: 10, b: 20, c: 30 });
        map.clear();
        expect(map.length).toBe(0);
        expect(map.keysArray()).toEqual([]);
        expect(map.valuesArray()).toEqual([]);
        expect(map.entriesArray()).toEqual([]);
    });
    it("should equals", function () {
        var map = Map.from({ a: 10, b: 20 });
        expect(Object.equals(map, map)).toBe(true);
        expect(map.equals(map)).toBe(true);
        expect(Map.from({ a: 10, b: 20 }).equals({ b: 20, a: 10 })).toBe(true);
        expect(Object.equals({ a: 10, b: 20 }, Map.from({ b: 20, a: 10 }))).toBe(true);
        expect(Object.equals(Map.from({ b: 20, a: 10 }), { a: 10, b: 20 })).toBe(true);
        expect(Object.equals(Map.from({ b: 20, a: 10 }), Map.from({ a: 10, b: 20 }))).toBe(true);
    });
    it("should clone", function () {
        var map = Map.from({ a: 10, b: 20 });
        var clone = Object.clone(map);
        expect(map).not.toBe(clone);
        expect(map.equals(clone)).toBe(true);
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFwLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyJwYWNrYWdlcy9qcy1wcm90b3R5cGVzL3BhY2thZ2VzL2NvbGxlY3Rpb25zL3Rlc3Qvc3BlYy9tYXAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHVFQUF1RTtBQUN2RSxpRUFBaUU7QUFFakUsSUFBSSxrQkFBa0IsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQztBQUV6RCxNQUFNLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQztBQUM3QixTQUFTLFdBQVcsQ0FBQyxHQUFHLEVBQUUsTUFBTTtJQUU1QixrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUV4QixNQUFNLEdBQUcsTUFBTSxJQUFJLEVBQUUsQ0FBQztJQUN0QixJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3hCLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDeEIsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUV4QixTQUFTLHlCQUF5QixDQUFDLEdBQUc7UUFDbEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDL0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDNUIsTUFBTSxDQUFDLEdB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LEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNuRSxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBQyxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0UsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBQyxDQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzNFLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDekYsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsY0FBYyxFQUFFO1FBQ2YsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBQyxDQUFDLENBQUM7UUFDbkMsSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM5QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM1QixNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN6QyxDQUFDLENBQUMsQ0FBQztBQUVQLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUZXN0cyB0aGF0IGFyZSBlcXVhbGx5IGFwcGxpY2FibGUgdG8gTWFwLCB1bmJvdW5kZWQgTHJ1TWFwLCBGYXN0TWFwLlxuLy8gVGhlc2UgZG8gbm90IGFwcGx5IHRvIFNvcnRlZE1hcCBzaW5jZSBrZXlzIGFyZSBub3QgY29tcGFyYWJsZS5cblxudmFyIGRlc2NyaWJlTWFwQ2hhbmdlcyA9IHJlcXVpcmUoXCIuL2xpc3Rlbi9tYXAtY2hhbmdlc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBkZXNjcmliZU1hcDtcbmZ1bmN0aW9uIGRlc2NyaWJlTWFwKE1hcCwgdmFsdWVzKSB7XG5cbiAgICBkZXNjcmliZU1hcENoYW5nZXMoTWFwKTtcblxuICAgIHZhbHVlcyA9IHZhbHVlcyB8fCBbXTtcbiAgICB2YXIgYSA9IHZhbHVlc1swXSB8fCB7fTtcbiAgICB2YXIgYiA9IHZhbHVlc1sxXSB8fCB7fTtcbiAgICB2YXIgYyA9IHZhbHVlc1syXSB8fCB7fTtcblxuICAgIGZ1bmN0aW9uIHNob3VsZEhhdmVUaGVVc3VhbENvbnRlbnQobWFwKSB7XG4gICAgICAgIGV4cGVjdChtYXAuaGFzKGEpKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QobWFwLmhhcyhiKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KG1hcC5oYXMoYykpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QobWFwLmdldChhKSkudG9CZSgxMCk7XG4gICAgICAgIGV4cGVjdChtYXAuZ2V0KGIpKS50b0JlKDIwKTtcbiAgICAgICAgZXhwZWN0KG1hcC5nZXQoYykpLnRvQmUodW5kZWZpbmVkKTtcbiAgICAgICAgZXhwZWN0KG1hcC5sZW5ndGgpLnRvQmUoMik7XG4gICAgICAgIGV4cGVjdChtYXAua2V5c0FycmF5KCkpLnRvRXF1YWwoW2EsIGJdKTtcbiAgICAgICAgZXhwZWN0KG1hcC52YWx1ZXNBcnJheSgpKS50b0VxdWFsKFsxMCwgMjBdKTtcbiAgICAgICAgZXhwZWN0KG1hcC5lbnRyaWVzQXJyYXkoKSkudG9FcXVhbChbW2EsIDEwXSwgW2IsIDIwXV0pO1xuICAgICAgICBleHBlY3QobWFwLnJlZHVjZShmdW5jdGlvbiAoYmFzaXMsIHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgIGJhc2lzLnB1c2goW3RoaXMsIGtleSwgdmFsdWVdKTtcbiAgICAgICAgICAgIHJldHVybiBiYXNpcztcbiAgICAgICAgfSwgW10sIG1hcCkpLnRvRXF1YWwoW1xuICAgICAgICAgICAgW21hcCwgYSwgMTBdLFxuICAgICAgICAgICAgW21hcCwgYiwgMjBdXG4gICAgICAgIF0pOztcbiAgICB9XG5cbiAgICBpdChcInNob3VsZCBiZSBjb25zdHJ1Y3RhYmxlIGZyb20gZW50cnkgZHVwbGVzIHdpdGggb2JqZWN0IGtleXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWFwID0gbmV3IE1hcChbW2EsIDEwXSwgW2IsIDIwXV0pO1xuICAgICAgICBzaG91bGRIYXZlVGhlVXN1YWxDb250ZW50KG1hcCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBiZSBjb25zdHJ1Y3RhYmxlIGZyb20gYW4gaW50ZXJhYmxlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hcCA9IE1hcC5mcm9tKHtcbiAgICAgICAgICAgIGZvckVhY2g6IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc3ApIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNwLCBbYSwgMTBdKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNwLCBbYiwgMjBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNob3VsZEhhdmVUaGVVc3VhbENvbnRlbnQobWFwKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHN1cHBvcnQgZmlsdGVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hcCA9IE1hcC5mcm9tKHthOiAxMCwgYjogMjAsIGM6IDMwfSk7XG4gICAgICAgIGV4cGVjdChtYXAuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICByZXR1cm4ga2V5ID09PSBcImFcIiB8fCB2YWx1ZSA9PT0gMzA7XG4gICAgICAgIH0pLmVudHJpZXNBcnJheSgpKS50b0VxdWFsKFtcbiAgICAgICAgICAgIFtcImFcIiwgMTBdLFxuICAgICAgICAgICAgW1wiY1wiLCAzMF1cbiAgICAgICAgXSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCByZW1vdmUgb25lIGVudHJ5XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hcCA9IG5ldyBNYXAoW1thLCAxMF0sIFtiLCAyMF0sIFtjLCAzMF1dKTtcbiAgICAgICAgZXhwZWN0KG1hcC5kZWxldGUoYykpLnRvQmUodHJ1ZSk7XG4gICAgICAgIHNob3VsZEhhdmVUaGVVc3VhbENvbnRlbnQobWFwKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGJlIGFibGUgdG8gZGVsZXRlIGFsbCBjb250ZW50XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hcCA9IE1hcC5mcm9tKHthOiAxMCwgYjogMjAsIGM6IDMwfSk7XG4gICAgICAgIG1hcC5jbGVhcigpO1xuICAgICAgICBleHBlY3QobWFwLmxlbmd0aCkudG9CZSgwKTtcbiAgICAgICAgZXhwZWN0KG1hcC5rZXlzQXJyYXkoKSkudG9FcXVhbChbXSk7XG4gICAgICAgIGV4cGVjdChtYXAudmFsdWVzQXJyYXkoKSkudG9FcXVhbChbXSk7XG4gICAgICAgIGV4cGVjdChtYXAuZW50cmllc0FycmF5KCkpLnRvRXF1YWwoW10pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgZXF1YWxzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hcCA9IE1hcC5mcm9tKHthOiAxMCwgYjogMjB9KTtcbiAgICAgICAgZXhwZWN0KE9iamVjdC5lcXVhbHMobWFwLCBtYXApKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QobWFwLmVxdWFscyhtYXApKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoTWFwLmZyb20oe2E6IDEwLCBiOiAyMH0pLmVxdWFscyh7YjogMjAsIGE6IDEwfSkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChPYmplY3QuZXF1YWxzKHthOiAxMCwgYjogMjB9LCBNYXAuZnJvbSh7YjogMjAsIGE6IDEwfSkpKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoT2JqZWN0LmVxdWFscyhNYXAuZnJvbSh7YjogMjAsIGE6IDEwfSksIHthOiAxMCwgYjogMjB9KSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KE9iamVjdC5lcXVhbHMoTWFwLmZyb20oe2I6IDIwLCBhOiAxMH0pLCBNYXAuZnJvbSh7YTogMTAsIGI6IDIwfSkpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgY2xvbmVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWFwID0gTWFwLmZyb20oe2E6IDEwLCBiOiAyMH0pO1xuICAgICAgICB2YXIgY2xvbmUgPSBPYmplY3QuY2xvbmUobWFwKTtcbiAgICAgICAgZXhwZWN0KG1hcCkubm90LnRvQmUoY2xvbmUpO1xuICAgICAgICBleHBlY3QobWFwLmVxdWFscyhjbG9uZSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbn1cbiJdfQ==